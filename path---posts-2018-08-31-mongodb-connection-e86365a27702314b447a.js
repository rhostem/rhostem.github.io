webpackJsonp([99077004253837],{765:function(a,n){a.exports={data:{site:{siteMetadata:{title:"rhostem.github.io",url:"https://rhostem.github.io",author:"rhostem",description:"프론트엔드 웹 개발 기술 블로그"}},markdownRemark:{html:'<h2 id="amazon-lightsail"><a href="#amazon-lightsail" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Amazon Lightsail</h2>\n<p><a href="https://lightsail.aws.amazon.com/" target="_blank" rel="nofollow">Amazon Lightsail</a>은 저렴한 가격으로 클라우드 서버를 사용할 수 있다. 메모리 512MB의 최소 사양 인스턴스는 3.5달러밖에 하지 않기 때문에 테스트나 학습용으로 사용하기 좋다. 운영체제는 Ubuntu 16.04 버전을 선택해서 사용했다.</p>\n<h2 id="mongodb-설치"><a href="#mongodb-%EC%84%A4%EC%B9%98" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>MongoDB 설치</h2>\n<p>공식 홈페이지의 설치 가이드를 단계별로 따라가면 쉽게 설치할 수 있다. 나는 <a href="https://docs.mongodb.com/manual/tutorial/install-mongodb-on-ubuntu/#using-deb-packages-recommended" target="_blank" rel="nofollow"><code class="language-text">.deb</code> 패키지를 사용하는 방법</a>으로 진행했다. 설치한 MongoDB 버전은 4.0.2였다.</p>\n<h3 id="데이터베이스-폴더-설정"><a href="#%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-%ED%8F%B4%EB%8D%94-%EC%84%A4%EC%A0%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>데이터베이스 폴더 설정</h3>\n<p>데이터베이스 사용을 위해서는 데몬 프로세스 <a href="https://docs.mongodb.com/manual/reference/program/mongod/index.html" target="_blank" rel="nofollow">mongod</a>를 실행해야 하는데, 그 전에 데이터를 저장할 폴더를 만들어야 한다. MongoDB의 기본 데이터베이스 폴더는 <code class="language-text">/data/db</code>로 지정되어 있으니 루트 권한으로 폴더를 만들어야 한다. 폴더가 만들어지면 MongoDB를 설치하면서 등록된 시스템 서비스를 실행한다.</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">mkdir</span> /data/db\n<span class="token function">sudo</span> <span class="token function">service</span> mongod start</code></pre>\n      </div>\n<p>서비스 실행 후 <a href="https://docs.mongodb.com/manual/mongo/index.html" target="_blank" rel="nofollow">mongo 쉘</a>을 실행할 수 있으면 로컬에서 데이터베이스를 사용할 준비가 된 것이다.</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">mongo</code></pre>\n      </div>\n<h2 id="원격-접속-설정"><a href="#%EC%9B%90%EA%B2%A9-%EC%A0%91%EC%86%8D-%EC%84%A4%EC%A0%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>원격 접속 설정</h2>\n<p>설치 직후의 데이터베이스는 인증 없이 사용할 수 있고, 설치된 기기에서만 접속 가능하다. 원격 접속이 가능하도록 하려면 사용자를 추가하고 네트워크 관련 설정을 수정해야 한다.</p>\n<h3 id="사용자-생성"><a href="#%EC%82%AC%EC%9A%A9%EC%9E%90-%EC%83%9D%EC%84%B1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>사용자 생성</h3>\n<p>사용자 생성은 mongo 쉘에 접속해서 한다. mongo 쉘은 MongoDB의 자바스크립트 인터페이스로서 명령어 실행과 함수 호출을 통해 데이터베이스를 수정할 수 있는 기능을 제공한다.</p>\n<p>사용자 정보는 기본적으로 admin 데이터베이스에 저장한다. MongoDB는 사용자 정보가 저장된 데이터베이스가 아닌 다른 데이터베이스에 대한 권한을 부여할 수도 있다. 이를 <a href="https://docs.mongodb.com/manual/core/authorization/" target="_blank" rel="nofollow">Role-Based Access Control</a>이라고 한다.</p>\n<p>데이터베이스를 선택하고, <a href="https://docs.mongodb.com/manual/reference/method/db.createUser/index.html" target="_blank" rel="nofollow">사용자를 생성</a>하는 함수를 호출하도록 하자.</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">use admin <span class="token comment"># admin 데이터베이스 선택</span>\n\ndb.createUser<span class="token punctuation">(</span><span class="token punctuation">{</span>\n  user: <span class="token string">"dbadmin"</span>,  <span class="token comment"># 계정 이름</span>\n  pwd: <span class="token string">"password"</span>,  <span class="token comment"># 비밀번호</span>\n  roles: <span class="token punctuation">[</span>          <span class="token comment"># 사용자에게 주어진 권한 목록. 여러 데이터베이스에 대한 권한을 할당할 수 있다.</span>\n    <span class="token punctuation">{</span>\n      role: <span class="token string">"root"</span>, <span class="token comment"># built-in 권한인 root. 문자 그대로 모든 데이터베이스를 관리할 수 있다.</span>\n      db: <span class="token string">"admin"</span>   <span class="token comment"># 어떤 데이터베이스에 대한 권한인지 명시</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">]</span><span class="token punctuation">}</span>\n<span class="token punctuation">)</span></code></pre>\n      </div>\n<p>그리고 관리자가 아닌 사용자를 생성해서 실제 작업에 사용하도록 한다.</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">db.createUser<span class="token punctuation">(</span><span class="token punctuation">{</span>\n  user: <span class="token string">"rhostem"</span>,\n  pwd: <span class="token string">"password"</span>,\n  roles: <span class="token punctuation">[</span>\n    <span class="token punctuation">{</span>\n      role: <span class="token string">"readWrite"</span>, <span class="token comment"># 읽기, 쓰기 권한</span>\n      db: <span class="token string">"test"</span>         <span class="token comment"># 위의 권한을 부여할 데이터베이스로 test를 지정</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">]</span><span class="token punctuation">}</span>\n<span class="token punctuation">)</span></code></pre>\n      </div>\n<h3 id="code-classlanguage-textmongodconfcode-파일-설정"><a href="#code-classlanguage-textmongodconfcode-%ED%8C%8C%EC%9D%BC-%EC%84%A4%EC%A0%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code class="language-text">mongod.conf</code> 파일 설정</h3>\n<p>사용자를 생성했으니 데이터베이스에 접속할 때 인증이 필요하도록 수정해야 한다. 서비스가 사용하고 있는 <a href="https://docs.mongodb.com/manual/reference/configuration-options/" target="_blank" rel="nofollow">설정</a> 파일은 아래의 명령어로 확인할 수 있다. 아래 로그에서 확인할 수 있듯이 Ubuntu에서는 <code class="language-text">/etc/mongod.conf</code> 파일을 수정하면 된다.</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash"><span class="token function">service</span> mongod status\n\n● mongod.service - MongoDB Database Server\n   Loaded: loaded <span class="token punctuation">(</span>/lib/systemd/system/mongod.service<span class="token punctuation">;</span> disabled<span class="token punctuation">;</span> vendor preset: enabled<span class="token punctuation">)</span>\n   Active: active <span class="token punctuation">(</span>running<span class="token punctuation">)</span> since Thu 2018-08-30 00:00:00 UTC<span class="token punctuation">;</span> 2s ago\n     Docs: https://docs.mongodb.org/manual\n Main PID: 4376 <span class="token punctuation">(</span>mongod<span class="token punctuation">)</span>\n    Tasks: 26\n   Memory: 138.1M\n      CPU: 1.053s\n   CGroup: /system.slice/mongod.service\n           └─4376 /usr/bin/mongod --config /etc/mongod.conf\n           <span class="token comment"># MongoDB 데몬 프로세스의 옵션 파일을 지정하는 --config가 사용되어 있다.</span></code></pre>\n      </div>\n<p>데이터베이스 접속이 인증이 필요하도록 하려면 <strong>security</strong> 섹션을 아래처럼 수정한다.</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">security:\n  authorization: enabled</code></pre>\n      </div>\n<p>그리고 <strong>net</strong> 섹션의 <code class="language-text">bind_ip</code> 항목도 수정해야 한다. 기본 설정은 로컬에서만 접속할 수 있도록 <code class="language-text">127.0.0.1</code>로 되어 있는데, 모든 아이피에서 접속할 수 있도록 <code class="language-text">0.0.0.0</code>으로 변경한다.</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">net:\n  port: 27017\n  bindIp: 0.0.0.0</code></pre>\n      </div>\n<h3 id="tcp-포트-개방"><a href="#tcp-%ED%8F%AC%ED%8A%B8-%EA%B0%9C%EB%B0%A9" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TCP 포트 개방</h3>\n<p>설정에서도 확인할 수 있지만 MongoDB는 기본적으로 <strong>27107</strong>번 포트를 사용한다. 따라서 외부에서 접속할 수 있도록 방화벽 설정을 통해 27017번 포트를 개방해야 한다. 나는 Amazon Lightsail 인스턴스를 사용했기에 웹에서 간편하게 설정할 수 있었다. 인스턴스의 네트워킹 탭에 항목을 추가하면 된다.</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/lightsail_firewall-c4b0534d0ace88d765b1fe9f3b96a3a4-2f695.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 1060px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 39.9734395750332%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA9ElEQVQoz4VS2Y7DIAzk/3+vj9u3lVq1pOEIIQeYWZuEdldtt5EGHLBHnjHqpDUOX0d0PuDTV0r5mKO63uD7fEbvPOI0YYwRfhgwhFDjic+EqJG1+B1UKYSUEuZ5xsp7ynnbd8g5EdXkdV2R+f4dGQmhLMY67iogc+FvaWOcYJyr8cJkluN/CbleyaJZ9rKmWij/tBOHcWTEjZylx2n+k/MKSpgv3Y09dE+Ejr20ftjI2U/d9/dOHtikUutQEqTQWIuye9UkS0etK/GzM/a15JxAgio5selBg9wJyV8hQ9oMpvtTaEN5njLfpQXJXbBcj6A54AcyxXVGakxiDQAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px #ffffff;"\n        alt="방화벽 설정"\n        title=""\n        src="/static/lightsail_firewall-c4b0534d0ace88d765b1fe9f3b96a3a4-9056e.png"\n        srcset="/static/lightsail_firewall-c4b0534d0ace88d765b1fe9f3b96a3a4-507eb.png 265w,\n/static/lightsail_firewall-c4b0534d0ace88d765b1fe9f3b96a3a4-63b28.png 530w,\n/static/lightsail_firewall-c4b0534d0ace88d765b1fe9f3b96a3a4-9056e.png 1060w,\n/static/lightsail_firewall-c4b0534d0ace88d765b1fe9f3b96a3a4-2f695.png 1506w"\n        sizes="(max-width: 1060px) 100vw, 1060px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    \n<em>TCP 프로토콜 27017 포트를 개방했다</em></p>\n<h3 id="접속-명령어"><a href="#%EC%A0%91%EC%86%8D-%EB%AA%85%EB%A0%B9%EC%96%B4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>접속 명령어</h3>\n<p>우선 사용자가 설정되었는지 확인하기 위해 서버에서 mongo 쉘에 접속을 시도해본다. <code class="language-text">-p</code> 옵션 다음에는 비밀번호를 입력해야 하지만 비워두면 입력을 위한 프롬프트가 뜬다.</p>\n<p><code class="language-text">authenticationDatabase</code> 옵션은 사용자의 정보가 저장된 데이터이스를 가리키기 위한 것이다. 앞서 사용자를 추가할 때 사용한 admin 데이터베이스를 입력한다.</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash"><span class="token function">sudo</span> mongo -u dbadmin -p --authenticationDatabase admin\n\nMongoDB shell version v4.0.2\nEnter password: <span class="token operator">&lt;</span>패스워드 입력<span class="token operator">></span></code></pre>\n      </div>\n<p>접속에 성공했다면 이제 서버에서 로그아웃한 후 원격 접속이 가능한지 시도해보자. 앞의 명령어에 <code class="language-text">host</code> 옵션만 추가하면 된다. <code class="language-text">host</code>에는 서버의 IP 주소 또는 도메인을 입력하면 된다.</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">mongo -u dbadmin -p --host <span class="token operator">&lt;</span>아이피 또는 도메인<span class="token operator">></span> --authenticationDatabase admin</code></pre>\n      </div>\n<p>접속이 성공했다면 원격으로 데이터베이스를 사용할 준비가 된 것이다. 이제 node.js 서버 앱에서 <a href="https://mongoosejs.com/" target="_blank" rel="nofollow">Mongoose</a> 같은 모듈을 사용해 데이터베이스를 사용할 수 있다.</p>\n<p>(Mac 또는 Windows의 커맨드라인에서 데이터베이스에 원격 접속하기 위해서는 MongoDB가 설치되어 있어야 한다. 그렇지 않다면 MongoDB를 위한 <a href="https://www.guru99.com/top-20-mongodb-tools.html" target="_blank" rel="nofollow">GUI 도구</a>를 사용하면 된다.)</p>\n<h2 id="기타-설정"><a href="#%EA%B8%B0%ED%83%80-%EC%84%A4%EC%A0%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>기타 설정</h2>\n<h3 id="시스템-재시작-시-mongodb를-자동으로-실행하도록-설정"><a href="#%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%9E%AC%EC%8B%9C%EC%9E%91-%EC%8B%9C-mongodb%EB%A5%BC-%EC%9E%90%EB%8F%99%EC%9C%BC%EB%A1%9C-%EC%8B%A4%ED%96%89%ED%95%98%EB%8F%84%EB%A1%9D-%EC%84%A4%EC%A0%95" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>시스템 재시작 시 MongoDB를 자동으로 실행하도록 설정</h3>\n<p>서버를 재시작하면 실행 중인 mongod 프로세스도 종료된다. 시스템 시작과 함께 서비스가 실행되도록 crontab을 사용해서 작업을 등록할 수 있다. crontab은 Linux 운영체제가 특정 시점에 특정 명령어를 실행하도록 할 수 있는 기능이다. 아래의 명령어로 crontab 파일을 연다.</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash"><span class="token function">crontab</span> -e</code></pre>\n      </div>\n<p>맨 아래쪽에 재부팅 시점에 실행할 명령어를 추가한다.</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">@reboot <span class="token function">sudo</span> <span class="token function">service</span> mongod start</code></pre>\n      </div>\n<p>파일을 저장하고 나왔을 때 아래의 메시지가 표시되면 등록된 것이다.</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code class="language-bash">crontab: installing new <span class="token function">crontab</span></code></pre>\n      </div>\n<h3 id="데이터베이스-접속을-위한-쉘-스크립트-작성"><a href="#%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EC%A0%91%EC%86%8D%EC%9D%84-%EC%9C%84%ED%95%9C-%EC%89%98-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EC%9E%91%EC%84%B1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>데이터베이스 접속을 위한 쉘 스크립트 작성</h3>\n<p>git 저장소에서 작업하고 있다면 쉘 스크립트에 비밀번호가 노출되면 안 되므로 별도의 파일에 저장해서 관리하는 편이 보안상 좋다. 예를 들어 비밀번호를 .dbpasswd 파일에 저장했다면 해당 파일은 .gitignore 파일에 등록하고 쉘 스크립트를 아래와 같이 작성한다.</p>\n<div class="gatsby-highlight">\n      <pre class="language-shell"><code class="language-shell"><span class="token comment"># connect-db.sh</span>\n\npasswd<span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token operator">&lt;</span>.dbpasswd<span class="token variable">)</span></span> <span class="token comment"># 변수 passwd에 .dbpasswd 파일의 내용을 할당.</span>\nmongo -u rhostem -p <span class="token variable">$passwd</span> --host db.host.name --authenticationDatabase admin</code></pre>\n      </div>\n<h2 id="참고자료"><a href="#%EC%B0%B8%EA%B3%A0%EC%9E%90%EB%A3%8C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>참고자료</h2>\n<ul>\n<li><a href="https://docs.mongodb.com/manual/" target="_blank" rel="nofollow">The MongoDB 4.0 Manual — MongoDB Manual</a></li>\n<li><a href="https://optimalbi.com/blog/2017/09/14/how-to-install-mongodb-with-aws-ec2/" target="_blank" rel="nofollow">How to Install MongoDB with AWS EC2 | OptimalBI</a></li>\n<li><a href="https://www.kompulsa.com/run-a-program-on-startup-console-on-ubuntu-18-04/" target="_blank" rel="nofollow">Run A Program On Startup (Command Line On Ubuntu 18.04)</a></li>\n<li><a href="https://www.guru99.com/top-20-mongodb-tools.html" target="_blank" rel="nofollow">20 Best MongoDB GUI Tools in 2018</a></li>\n<li><a href="https://lightsail.aws.amazon.com/ls/docs/ko/articles/understanding-firewall-and-port-mappings-in-amazon-lightsail" target="_blank" rel="nofollow">Amazon Lightsail에서 퍼블릭 네트워크 포트와 방화벽 설정의 이해</a></li>\n</ul>',timeToRead:6,fields:{tagSlugs:["/tag/mongodb","/tag/ubuntu","/tag/aws"]},frontmatter:{title:"MongoDB 원격 접속 설정",subTitle:"Amazon Lightsail의 Ubuntu 인스턴스에서 MongoDB 설치 및 원격 접속을 위한 설정 과정",tags:["MongoDB","Ubuntu","AWS"],date:"2018-08-30",mainImageAlt:"photo by Ken Treloar(https://unsplash.com/photos/S8xakAqlGhs)",description:"",mainImage:{childImageSharp:{sizes:{aspectRatio:1.7771739130434783,base64:"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMEBf/EABYBAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAAB00iZo5pf/8QAGRAAAgMBAAAAAAAAAAAAAAAAAAECAxEx/9oACAEBAAEFAlCsbijdKy7jP//EABYRAAMAAAAAAAAAAAAAAAAAAAABEv/aAAgBAwEBPwGUSj//xAAWEQADAAAAAAAAAAAAAAAAAAAAARL/2gAIAQIBAT8BtlM//8QAGhAAAgIDAAAAAAAAAAAAAAAAACECEiAxof/aAAgBAQAGPwLXRxFXD//EABoQAAMBAQEBAAAAAAAAAAAAAAABESFxQVH/2gAIAQEAAT8h6XwQXXxEaWOM0xodOn//2gAMAwEAAgADAAAAEAzv/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQAxYf/aAAgBAwEBPxAPC4X/xAAXEQEBAQEAAAAAAAAAAAAAAAABADFh/9oACAECAQE/EFdbtf/EABsQAQADAQADAAAAAAAAAAAAAAEAESExUWGR/9oACAEBAAE/EGbVpmhD6D0NYo9DtJhvYiI8pPpE2HXxk//Z",sizes:"(max-width: 1280px) 100vw, 1280px",src:"/static/main-5b8428c81014965cc9a5a3e2996d1399-6ff54.jpg",srcSet:"/static/main-5b8428c81014965cc9a5a3e2996d1399-3c4d0.jpg 320w,\n/static/main-5b8428c81014965cc9a5a3e2996d1399-e154f.jpg 640w,\n/static/main-5b8428c81014965cc9a5a3e2996d1399-6ff54.jpg 1280w,\n/static/main-5b8428c81014965cc9a5a3e2996d1399-efc37.jpg 1920w,\n/static/main-5b8428c81014965cc9a5a3e2996d1399-45f25.jpg 2289w"}}}}}},pathContext:{slug:"/posts/2018-08-31-mongodb-connection/"}}}});
//# sourceMappingURL=path---posts-2018-08-31-mongodb-connection-e86365a27702314b447a.js.map