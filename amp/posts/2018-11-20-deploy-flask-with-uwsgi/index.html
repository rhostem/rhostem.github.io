<!DOCTYPE html><html lang="ko" amp=""><head><style amp-boilerplate="">body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate="">body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript><style amp-custom="">
/* sc-component-id: sc-global-2139499442 */
@import url(//fonts.googleapis.com/earlyaccess/jejugothic.css); @font-face{font-family:Menlo Regular;src:url("/fonts/menlo-regular.eot"),url("/fonts/menlo-regular.woff2"),url("/fonts/menlo-regular.woff"),url("/fonts/menlo-regular.ttf"),url("/fonts/menlo-regular.svg");} html{line-height:1.15;-webkit-text-size-adjust:100%;text-size-adjust:100%;font-family:sans-serif;} article,aside,footer,header,nav,section{display:block;} h1{font-size:2em;margin:0.67em 0;} figcaption,figure,main{display:block;} figure{margin:1em 40px;} hr{box-sizing:content-box;height:0;overflow:visible;} pre{font-family:monospace,monospace;font-size:1em;} a{background-color:transparent;-webkit-text-decoration-skip:objects;} abbr[title]{border-bottom:none;-webkit-text-decoration:underline dotted;text-decoration:underline dotted;} b,strong{font-weight:inherit;} code,kbd,samp{font-family:monospace,monospace;font-size:1em;} dfn{font-style:italic;} mark{background-color:#ff0;color:#000;} small{font-size:80%;} sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;} sub{bottom:-0.25em;} sup{top:-0.5em;} audio,video{display:inline-block;} audio:not([controls]){display:none;height:0;} img{border-style:none;} svg:not(:root){overflow:hidden;} button,input,optgroup,select,textarea{margin:0;font-family:sans-serif;font-size:100%;line-height:1.15;} button,input{overflow:visible;} button,select{text-transform:none;} button,html [type="button"],[type="reset"],[type="submit"]{-webkit-appearance:button;} button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0;} button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText;} fieldset{border:1px solid #c0c0c0;margin:0 2px;padding:0.35em 0.625em 0.75em;} legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal;} progress{display:inline-block;vertical-align:baseline;} textarea{overflow:auto;} [type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0;} [type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto;} [type="search"]{-webkit-appearance:textfield;outline-offset:-2px;} [type="search"]::-webkit-search-cancel-button,[type="search"]::-webkit-search-decoration{-webkit-appearance:none;} ::-webkit-file-upload-button{-webkit-appearance:button;font:inherit;} details,menu{display:block;} summary{display:list-item;} canvas{display:inline-block;} template{display:none;} [hidden]{display:none;} body{margin:0;} a:active,a:hover{outline-width:0;} *{font-smooth:auto;-webkit-font-smoothing:antialiased;} .iframe-video-wrapper{position:relative;display:block;padding-bottom:56.25%;margin:3.2rem 0;} .iframe-video{position:absolute;top:0;left:0;width:100%;height:100%;}
/* sc-component-id: sc-global-1776268913 */
code,code[class*='language-'],pre[class*='language-']{color:#333;text-align:left;white-space:pre;word-spacing:normal;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;font-family:Menlo,'Liberation Mono',Consolas,Courier,monospace;line-height:1.4;direction:ltr;cursor:text;border:none;} pre[class*='language-']{overflow:auto;margin:1em 0;padding:1.2em;border-radius:3px;font-size:85%;} pre code{background:none;} p code,li code,table code{margin:0;border-radius:3px;padding:0.2em 0;font-size:85%;} p code:before,p code:after,li code:before,li code:after,table code:before,table code:after{-webkit-letter-spacing:-0.2em;-moz-letter-spacing:-0.2em;-ms-letter-spacing:-0.2em;letter-spacing:-0.2em;content:'\0a0';} code,:not(pre) > code[class*='language-'],pre[class*='language-']{background:rgba(0,0,0,0.04);} :not(pre) > code[class*='language-']{padding:0.1em;border-radius:0.3em;} button{background:none;} .token.comment,.token.prolog,.token.doctype,.token.cdata{color:#969896;} .token.punctuation,.token.string,.token.atrule,.token.attr-value{color:#183691;} .token.property,.token.tag{color:#63a35c;} .token.boolean,.token.number{color:#0086b3;} .token.selector,.token.attr-name,.token.attr-value .punctuation:first-child,.token.keyword,.token.regex,.token.important{color:#795da3;} .token.operator,.token.entity,.token.url,.language-css .token.string{color:#a71d5d;} .token.entity{cursor:help;} .namespace{opacity:0.7;}
/* sc-component-id: sc-bdVaJa */
.bXFetB{position:relative;min-height:100vh;padding-top:2.834rem;padding-bottom:12rem;}
/* sc-component-id: sc-htpNat */
.ihMjdK{width:100%;padding:0 1.06275rem;margin-left:auto;margin-right:auto;margin-top:2.834rem;} @media (min-width:1020px){.ihMjdK{width:1020px;padding:0 1.417rem;}} @media (min-width:750px){.ihMjdK{width:740px;}}
/* sc-component-id: sc-gzVnrw */
.jAZmHP{position:relative;height:1.8rem;min-width:1.8rem;}
/* sc-component-id: sc-htoDjs */
.fUQKIb{height:100%;border:none;outline:none;background-color:transparent;border-radius:6px;color:white;font-size:0.9rem;width:0;padding-left:1.8rem;-webkit-transition:all 0.3s linear;transition:all 0.3s linear;} .fUQKIb:focus{padding:0 1rem 0 1.8rem;width:130px;background-color:rgba(0,0,0,0.1);} @media (max-width:321px){.fUQKIb:focus{width:100px;}} @media (min-width:550px){.fUQKIb{width:180px;}.fUQKIb:focus{width:180px;}}
/* sc-component-id: sc-dnqmqq */
.ilmozt{position:absolute;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);left:0.4em;color:#fff;}
/* sc-component-id: sc-iwsKbI */
.ilBEGj{margin:0;padding-left:0;} .ilBEGj::after{clear:both;content:"";display:table;}
/* sc-component-id: sc-gZMcBi */
.eJFzYs{display:none;} @media (min-width:1020px){.eJFzYs{display:block;}}
/* sc-component-id: sc-gqjmRU */
.kbQNpv{float:left;line-height:2.834rem;margin-bottom:0;font-size:1rem;font-weight:400;color:#fff;} .kbQNpv:not(:first-child){margin-left:1.25rem;} .kbQNpv > i{margin-right:0.3rem;}
/* sc-component-id: sc-VigVT */
.dkXQzL{display:block;} @media (min-width:1020px){.dkXQzL{display:none;}}
/* sc-component-id: sc-jTzLTM */
.daAwkm{display:block;padding:1rem 0.5rem;border:none;background:none;outline:none;font-weight:100;color:#fff;} .daAwkm:hover{cursor:pointer;}
/* sc-component-id: sc-fjdhpX */
.irtuCT{display:block;width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:1rem;}
/* sc-component-id: sc-jzJRlG */
.cWZTGo{position:fixed;z-index:1000;top:0;right:-100%;width:200px;height:100vh;background-color:#21252f;color:#fff;border-left:1px solid #222;-webkit-transition:all 0.4s ease-in-out;transition:all 0.4s ease-in-out;box-shadow:0 0 5px 0 rgba(0,0,0,0.15);}
/* sc-component-id: sc-cSHVUG */
.kVZMia{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}
/* sc-component-id: sc-kAzzGY */
.eroHaJ{padding:0.7rem 1rem;color:#fff;margin-left:auto;margin-right:0.6rem;border:none;font-size:1.2rem;} .eroHaJ:hover{cursor:pointer;}
/* sc-component-id: sc-chPdSV */
.dxfrCM{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;margin:0;list-style:none;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}
/* sc-component-id: sc-kgoBCf */
.iZTDds{display:block;width:100%;padding:0.5rem 1.5rem;font-weight:700;-webkit-letter-spacing:-0.4px;-moz-letter-spacing:-0.4px;-ms-letter-spacing:-0.4px;letter-spacing:-0.4px;color:#fff;border-bottom:1px solid #f1f1f1;border-top:1px solid #f1f1f1;} .iZTDds > i{margin-right:0.5rem;} .iZTDds:last-child{border-top:none;}
/* sc-component-id: sc-kpOJdX */
.csVCUT{position:fixed;z-index:1;top:0;left:0;width:100%;background:linear-gradient(to right,#4568dc,#b06ab3);border-bottom:1px solid #ebebeb;}
/* sc-component-id: sc-dxgOiQ */
.bqANts{width:100%;padding:0 1.06275rem;margin-left:auto;margin-right:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;} @media (min-width:1020px){.bqANts{width:1020px;padding:0 1.417rem;}}
/* sc-component-id: sc-ckVGcZ */
.bRkVac{margin-right:auto;color:#fff;font-weight:400;font-size:1.2rem;font-family:'Roboto',sans-serif;line-height:2.834rem;-webkit-letter-spacing:-1px;-moz-letter-spacing:-1px;-ms-letter-spacing:-1px;letter-spacing:-1px;font-weight:400;}
/* sc-component-id: sc-jKJlTe */
.bgNcvS{margin-left:auto;margin-right:0.5rem;} @media (min-width:1020px){.bgNcvS{margin-right:1rem;}}
/* sc-component-id: sc-eNQAEJ */
.dLLKVi{margin:0;list-style:none;padding-left:0;}
/* sc-component-id: sc-hMqMXs */
.QDZKQ{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:absolute;bottom:0;width:100%;padding:1.5rem 0;background-color:#fff;border-top:1px solid #ebebeb;line-height:1.4;text-align:center;}
/* sc-component-id: sc-kEYyzF */
.fmiYEn{width:100%;padding:0 1.06275rem;margin-left:auto;margin-right:auto;font-weight:400;font-size:0.7rem;} @media (min-width:1020px){.fmiYEn{width:1020px;padding:0 1.417rem;}} @media (min-width:550px){.fmiYEn{font-size:0.75rem;}}
/* sc-component-id: sc-iAyFgw */
.hmhDOj{color:hsla(291,0%,18%,0.95);-webkit-text-decoration:underline;text-decoration:underline;}
/* sc-component-id: sc-hSdWYo */
.cAbZbn{text-align:center;font-size:1rem;margin-top:0.5rem;} @media (min-width:550px){.cAbZbn{font-size:0.85rem;}} .cAbZbn > *{margin-left:0.5em;} .cAbZbn i{color:hsla(291,0%,18%,0.95);}
/* sc-component-id: sc-eHgmQL */
.cuRlhx{margin-top:1rem;margin:0 auto;} .cuRlhx > p{font-weight:bold;margin:0.8rem 0 0;} .cuRlhx img{height:1.5rem;margin-bottom:0;}
/* sc-component-id: sc-jlyJG */
.hUSSrI{margin-left:-0.3rem;} .hUSSrI::after{clear:both;content:"";display:table;}
/* sc-component-id: sc-gipzik */
.itxWMV{font-size:0.8rem;font-weight:400;display:block;float:left;padding:0.25em 0.625em;margin-bottom:0.35em;margin-left:0.35em;line-height:1.417rem;color:rgba(0,0,0,0.6);background-color:rgba(0,0,0,0.04);border-radius:3px;} .itxWMV:hover{background-color:rgba(0,0,0,0.1);}
/* sc-component-id: sc-csuQGl */
.brJIZu{text-align:left;margin-bottom:0.7085rem;}
/* sc-component-id: sc-bRBYWo */
.jsOTCr{font-size:0.9rem;} .jsOTCr::after{clear:both;content:"";display:table;}
/* sc-component-id: sc-hzDkRC */
.ecRhmS{margin-top:0.7085rem;}
/* sc-component-id: sc-jhAzac */
.kofZoN{width:100%;max-width:740px;margin:2.834rem auto 0;}
/* sc-component-id: sc-fMiknA */
.gGvGEL{margin-top:2.834rem;margin-bottom:2.834rem;}
/* sc-component-id: sc-dVhcbM */
.ixxIMy{border:none;display:block;padding:0;margin:0 0.75rem;-webkit-transition:color 0.2s linear;transition:color 0.2s linear;color:#88939d;background:none;} .ixxIMy:hover{color:#725ec1;cursor:pointer;}
/* sc-component-id: sc-eqIVtm */
.eyZGpZ{border:none;display:block;padding:0;margin:0 0.75rem;-webkit-transition:color 0.2s linear;transition:color 0.2s linear;color:#88939d;background:none;} .eyZGpZ:hover{color:#725ec1;cursor:pointer;}
/* sc-component-id: sc-fAjcbJ */
.ifYIyX{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;margin:2.5rem 0;}
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.417 'Nanum Gothic','Roboto','Spectral',-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(291, 0%, 18%,0.95);font-family:'Nanum Gothic','Roboto','Spectral',-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.06275rem;}h1{margin-left:0;margin-right:0;margin-top:5.668rem;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:2.1255rem;color:hsla(291, 0%, 18%,1);font-family:'Nanum Gothic','Roboto','Spectral',-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.4;}h2{margin-left:0;margin-right:0;margin-top:4.9595rem;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:2.1255rem;color:hsla(291, 0%, 18%,1);font-family:'Nanum Gothic','Roboto','Spectral',-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.4;}h3{margin-left:0;margin-right:0;margin-top:3.5425rem;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:2.1255rem;color:hsla(291, 0%, 18%,1);font-family:'Nanum Gothic','Roboto','Spectral',-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.4;}h4{margin-left:0;margin-right:0;margin-top:2.834rem;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.417rem;color:hsla(291, 0%, 18%,1);font-family:'Nanum Gothic','Roboto','Spectral',-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:2.834rem;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.417rem;color:hsla(291, 0%, 18%,1);font-family:'Nanum Gothic','Roboto','Spectral',-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:2.834rem;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.417rem;color:hsla(291, 0%, 18%,1);font-family:'Nanum Gothic','Roboto','Spectral',-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif;font-weight:700;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.06275rem;}ul{margin-left:1.417rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.06275rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.417rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.06275rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.06275rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.06275rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.06275rem;margin:2.1255rem 0;line-height:1.62955rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.06275rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.06275rem;font-size:0.85rem;line-height:1.417rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.06275rem;font-size:1rem;line-height:1.417rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.06275rem;}blockquote{margin-left:-1.06275rem;margin-right:-1.06275rem;margin-top:2.834rem;padding-bottom:0;padding-left:1.417rem;padding-right:1.06275rem;padding-top:0;margin-bottom:2.834rem;border-left:3px solid hsla(291, 0%, 18%,0.6);color:hsla(291, 0%, 18%,0.6);font-style:italic;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.06275rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.06275rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.06275rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.06275rem - 1px);background:hsla(291, 0%, 18%,0.1);border:none;height:1px;margin:3.5425rem auto;width:50%;color:hsla(291, 0%, 18%,1);background-image:linear-gradient(90deg,rgba(34,34,34,.2),rgba(34,34,34,.75),rgba(34,34,34,.2));}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.06275rem;}b{font-weight:bold;}strong{font-weight:bold;}dt{font-weight:bold;}th{font-weight:bold;}li{margin-bottom:calc(1.06275rem / 2);line-height:1.62955rem;}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.417rem;margin-bottom:calc(1.06275rem / 2);margin-top:calc(1.06275rem / 2);}li > ul{margin-left:1.417rem;margin-bottom:calc(1.06275rem / 2);margin-top:calc(1.06275rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.06275rem / 2);}code{font-size:0.85rem;line-height:1.417rem;}kbd{font-size:0.85rem;line-height:1.417rem;}samp{font-size:0.85rem;line-height:1.417rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:0.94467rem;padding-right:0.94467rem;padding-top:0.7085rem;padding-bottom:calc(0.7085rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}a{border-color:#2e2e2e;color:#2e2e2e;text-decoration:none;}p > img{margin-bottom:1.417rem;}p > img + em{font-size:0.85em;line-height:1.4;display:block;text-align:right;margin-bottom:2.834rem;color:hsla(291, 0%, 18%,0.5);}.gatsby-resp-image-link{box-shadow:none;margin-top:2.834rem;margin-bottom:2.834rem;}.gatsby-resp-image-link:hover{background:none;box-shadow:none;}@media only screen and (min-width:38rem){.gatsby-resp-image-link{border-radius:.15rem;overflow:hidden;}}.post > .gatsby-highlight, .gatsby-resp-iframe-wrapper, .gatsby-resp-image-link{margin-left:-1.06275rem;margin-right:-1.06275rem;}.post .gatsby-resp-image-link + em{font-size:0.8em;line-height:1.4;display:block;margin-top:-1.417rem;margin-bottom:2.834rem;color:hsla(291, 0%, 18%,0.5);text-align:center;font-style:normal;}.post .gatsby-resp-image-link + em > a{color:hsla(291, 0%, 18%,0.5);background-image:none ;}tt, code{font-family:Menlo,"Space Mono",Consolas,"Roboto Mono","Droid Sans Mono","Liberation Mono",Courier,monospace;font-variant:none;-webkit-font-feature-settings:"clig" 0, "calt" 0;font-feature-settings:"clig" 0, "calt" 0;padding-top:0.1em;padding-bottom:0.1em;background-color:#f8f8f8;border-radius:2px;font-size:0.85em;}code:before,code:after,tt:before,tt:after{letter-spacing:-0.2em;content:" ";}pre code:before,pre code:after,pre tt:before,pre tt:after{content:"";}.gatsby-highlight{background-color:rgba(0,0,0, 0.04);border-radius:.15rem;margin-top:0;margin-bottom:1.06275rem;padding:1.06275rem;overflow:auto;}.gatsby-highlight pre[class*='language-']{background-color:transparent;border-radius:0;margin:0;padding:0;overflow:initial;float:left;min-width:100%;text-shadow:none;}.gatsby-highlight-code-line{background:#fff2cc;display:block;margin-right:-1.06275rem;margin-left:-1.06275rem;padding-right:1.06275rem;padding-left:0.7085rem;border-left:0.35425rem solid #ffd9b3;}.post a:not(.gatsby-resp-image-link):not(.anchor), .link-underline{position:relative;background-image:linear-gradient(#2e2e2e,#2e2e2e);text-shadow:0.03em 0 #fff, -0.03em 0 #fff, 0 0.03em #fff, 0 -0.03em #fff, 0.06em 0 #fff, -0.06em 0 #fff, 0.09em 0 #fff, -0.09em 0 #fff, 0.12em 0 #fff, -0.12em 0 #fff, 0.15em 0 #fff, -0.15em 0 #fff;transition:all 250ms cubic-bezier(0.4, 0, 0.2, 1);background-position:0 98%;background-repeat:repeat-x;background-size:1px 1px;}.post not(.pre) a:not(.gatsby-resp-image-link):not(.anchor):hover, .link-underline:hover{color:#4568dc;background-image:linear-gradient(#4568dc,#4568dc);}.post a.anchor{text-shadow:0 ;background-image:0 ;}.post pre a[href*='//']:after{display:none;}.post pre a{background:none ;text-shadow:none ;color:inherit ;}.post a[href*='//']:after{content:" " url("data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20class='i-external'%20viewBox='0%200%2032%2032'%20width='14'%20height='14'%20fill='none'%20stroke='%232e2e2e'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='9.38%'%3E%3Cpath%20d='M14%209%20L3%209%203%2029%2023%2029%2023%2018%20M18%204%20L28%204%2028%2014%20M28%204%20L14%2018'/%3E%3C/svg%3E");padding-right:0.2rem;}.post a[href*='//']:hover:after{content:" " url("data:image/svg+xml,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%20class='i-external'%20viewBox='0%200%2032%2032'%20width='14'%20height='14'%20fill='none'%20stroke='%234568dc'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='9.38%'%3E%3Cpath%20d='M14%209%20L3%209%203%2029%2023%2029%2023%2018%20M18%204%20L28%204%2028%2014%20M28%204%20L14%2018'/%3E%3C/svg%3E");}@media (min-width: 550px){html{font-size:109.375%;}blockquote{margin-left:0;margin-right:0;}}@media (min-width: 1020px){html{font-size:112.5%;}h1{font-size:1.8421rem;}h2{font-size:1.5587rem;}h3{font-size:1.2753rem;}h4{font-size:0.9919rem;}h5{font-size:1rem;}h6{font-size:1rem;}}</style><meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><link rel="icon" type="image/x-icon" href="/favicon.ico"><title data-react-helmet="true"></title><link rel="preload" href="/component---src-templates-post-page-js-0e89698c88e73b6b26f1.js"><link rel="preload" href="/path---posts-2018-11-20-deploy-flask-with-uwsgi-e58c091f32bf7efd9255.js"><link rel="preload" href="/app-969840fea8a852712064.js"><link rel="preload" href="/commons-10543920cbbe0663a88a.js"><link rel="sitemap" type="application/xml" href="/sitemap.xml"><link rel="manifest" href="/manifest.webmanifest"><meta name="theme-color" content="#4568dc"><link rel="alternate" type="application/rss+xml" href="/rss.xml"><title data-react-helmet="true">구글 애널리틱스 API를 사용한 Flask 앱을 uWSGI와 nginx로 배포한 과정</title><meta data-react-helmet="true" name="author" content="rhostem"><meta data-react-helmet="true" name="keywords" content="Python,Flask,uWSGI,Google Analytics"><meta data-react-helmet="true" name="description" content=""><meta data-react-helmet="true" itemprop="name" content="구글 애널리틱스 API를 사용한 Flask 앱을 uWSGI와 nginx로 배포한 과정"><meta data-react-helmet="true" itemprop="description" content=""><meta data-react-helmet="true" itemprop="image" content="https://rhostem.github.io/static/main-5cadb0e26a164c4d127335322c4a9b38-0c277.png"><meta data-react-helmet="true" property="og:type" content="article"><meta data-react-helmet="true" property="og:url" content="https://rhostem.github.io/posts/2018-11-20-deploy-flask-with-uwsgi/"><meta data-react-helmet="true" property="og:title" content="구글 애널리틱스 API를 사용한 Flask 앱을 uWSGI와 nginx로 배포한 과정"><meta data-react-helmet="true" property="og:description" content=""><meta data-react-helmet="true" property="og:image" content="https://rhostem.github.io/static/main-5cadb0e26a164c4d127335322c4a9b38-0c277.png"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="twitter:title" content="구글 애널리틱스 API를 사용한 Flask 앱을 uWSGI와 nginx로 배포한 과정"><meta data-react-helmet="true" name="twitter:description" content=""><meta data-react-helmet="true" name="twitter:image" content="https://rhostem.github.io/static/main-5cadb0e26a164c4d127335322c4a9b38-0c277.png"><noscript data-react-helmet="true">
            Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
          </noscript><link rel="canonical" href="/posts/2018-11-20-deploy-flask-with-uwsgi/"><script async src="https://cdn.ampproject.org/v0.js"></script><script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script></head><body><div id="___gatsby"><div data-reactroot="" data-reactid="1" data-react-checksum="2140432085"><main class="sc-bdVaJa bXFetB" data-reactid="2"><!-- react-empty: 3 --><nav class="sc-kpOJdX csVCUT" data-reactid="4"><div class="sc-dxgOiQ bqANts" data-reactid="5"><a href="/" data-reactid="6"><div class="sc-ckVGcZ bRkVac" data-reactid="7">rhostem.github.io</div></a><div class="sc-jKJlTe bgNcvS" data-reactid="8"><div class="sc-gzVnrw jAZmHP" data-reactid="9"><i class="fa fa-search sc-dnqmqq ilmozt" data-reactid="10"></i><input type="text" class="sc-htoDjs fUQKIb" id="searchInput" placeholder="검색" value="" data-reactid="11"><!-- react-empty: 12 --></div></div><div class="sc-eNQAEJ dLLKVi" data-reactid="13"><div class="sc-iwsKbI ilBEGj" data-reactid="14"><div class="sc-gZMcBi eJFzYs" data-reactid="15"><a class="sc-gqjmRU kbQNpv" href="/stats" data-reactid="16"><i class="fa fa-bar-chart" data-reactid="17"></i><!-- react-text: 18 -->인기<!-- /react-text --></a><a class="sc-gqjmRU kbQNpv" href="/archive" data-reactid="19"><i class="fa fa-list-alt" data-reactid="20"></i><!-- react-text: 21 -->연도별<!-- /react-text --></a></div><div class="sc-VigVT dkXQzL" data-reactid="22"><button class="sc-jTzLTM daAwkm" data-reactid="23"><span class="sc-fjdhpX irtuCT" data-reactid="24"><i class="fa fa-bars" aria-hidden="true" data-reactid="25"></i></span></button><div data-reactid="26"><div class="sc-jzJRlG cWZTGo" data-reactid="27"><div class="sc-cSHVUG kVZMia" data-reactid="28"><button class="sc-kAzzGY eroHaJ" data-reactid="29"><i class="fa fa-arrow-right" aria-hidden="true" data-reactid="30"></i></button></div><ul class="sc-chPdSV dxfrCM" data-reactid="31"><a class="sc-kgoBCf iZTDds" href="/stats" data-reactid="32"><i class="fa fa-bar-chart" data-reactid="33"></i><!-- react-text: 34 -->인기<!-- /react-text --></a><a class="sc-kgoBCf iZTDds" href="/archive" data-reactid="35"><i class="fa fa-list-alt" data-reactid="36"></i><!-- react-text: 37 -->연도별<!-- /react-text --></a></ul></div></div><!-- react-empty: 38 --></div></div></div></div></nav><div class="sc-htpNat ihMjdK" data-reactid="39"><header data-reactid="40"><h1 class="sc-csuQGl brJIZu" data-reactid="41">구글 애널리틱스 API를 사용한 Flask 앱을 uWSGI와 nginx로 배포한 과정</h1><div class="sc-bRBYWo jsOTCr" data-reactid="42"><!-- react-text: 43 -->2018-11-20<!-- /react-text --><!-- react-text: 44 --> · 읽기 <!-- /react-text --><!-- react-text: 45 -->6<!-- /react-text --><!-- react-text: 46 -->분<!-- /react-text --></div><div class="sc-hzDkRC ecRhmS" data-reactid="47"><div class="sc-jlyJG hUSSrI" data-reactid="48"><span class="sc-gipzik itxWMV" data-reactid="49"><a href="/tag/python" data-reactid="50">Python</a></span><span class="sc-gipzik itxWMV" data-reactid="51"><a href="/tag/flask" data-reactid="52">Flask</a></span><span class="sc-gipzik itxWMV" data-reactid="53"><a href="/tag/uwsgi" data-reactid="54">uWSGI</a></span><span class="sc-gipzik itxWMV" data-reactid="55"><a href="/tag/google_analytics" data-reactid="56">Google Analytics</a></span></div></div></header></div><div class="sc-jhAzac kofZoN" data-reactid="57"><div class=" gatsby-image-outer-wrapper" data-reactid="58"><div class=" gatsby-image-wrapper" data-reactid="59"><div data-reactid="60"></div><noscript data-reactid="62"><amp-img src="/static/main-5cadb0e26a164c4d127335322c4a9b38-0c277.png" srcset="/static/main-5cadb0e26a164c4d127335322c4a9b38-af0fb.png 320w,
/static/main-5cadb0e26a164c4d127335322c4a9b38-1baf7.png 640w,
/static/main-5cadb0e26a164c4d127335322c4a9b38-0c277.png 1280w,
/static/main-5cadb0e26a164c4d127335322c4a9b38-0a1aa.png 1600w" alt="" sizes="(max-width: 1280px) 100vw, 1280px" width="1280" height="380" layout="responsive"></amp-img></noscript></div></div><!-- react-text: 63 --><!-- /react-text --></div><div class="sc-htpNat ihMjdK" data-reactid="64"><article class="post sc-fMiknA gGvGEL" data-reactid="65"><p><em>이미지 출처: <a href="https://hackernoon.com/a-guide-to-scaling-machine-learning-models-in-production-aa8831163846" target="_blank" rel="nofollow">Link</a></em></p>
<h2 id="포스트-통계-기능을-위해-사용한-google-analytics-서비스-api"><a href="#%ED%8F%AC%EC%8A%A4%ED%8A%B8-%ED%86%B5%EA%B3%84-%EA%B8%B0%EB%8A%A5%EC%9D%84-%EC%9C%84%ED%95%B4-%EC%82%AC%EC%9A%A9%ED%95%9C-google-analytics-%EC%84%9C%EB%B9%84%EC%8A%A4-api" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>포스트 통계 기능을 위해 사용한 Google Analytics 서비스 API</h2>
<p>이 블로그는 CMS 서비스나 별도의 백엔드 서비스가 연결되어 있지 않은 웹사이트라서 따로 관리하고 있는 통계 데이터가 없다. 대신 구글 애널리틱스는 처음부터 연결해 뒀기 때문에 페이지뷰를 확인하는 것은 가능하다. 저번에 블로그 검색 기능을 추가했으니, 이번에는 인기 포스트를 보여주는 기능을 추가하고 싶어서 <a href="https://developers.google.com/analytics/devguides/reporting/core/v4/" target="_blank" rel="nofollow">구글 애널리틱스 Reporting API</a>의 힘을 빌리기로 했다. 그런데… 서비스 애플리케이션으로 지원하는 언어로 Java, Python, PHP를 지원하고 자바스크립트는 없는 게 아닌가? 자바스크립트가 백엔드 언어로 활용되기 시작한 역사가 오래되지 않긴 했지만 그래도 node.js를 만든 구글에서 지원하지 않는다는 건 조금 아쉬웠다. 그래서 공부도 할겸 파이썬으로 개발을 진행하기로 했다.</p>
<h3 id="서비스-애플리케이션을-위한-인증-시나리오"><a href="#%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%95%A0%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98%EC%9D%84-%EC%9C%84%ED%95%9C-%EC%9D%B8%EC%A6%9D-%EC%8B%9C%EB%82%98%EB%A6%AC%EC%98%A4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>서비스 애플리케이션을 위한 인증 시나리오</h3>
<p><a href="https://developers.google.com/identity/protocols/OAuth2" target="_blank" rel="nofollow">구글 API를 사용하기 위한 OAuth 2.0 인증 시나리오</a>에는 서비스 애플리케이션, 설치형 앱, 웹 애플리케이션이 있다.</p>
<p>서비스 애플리케이션은 백엔드(내가 구현한 앱)와 백엔드(구글 애널리틱스 API) 사이에서 인증을 진행한다. 따라서 웹사이트를 사용하는 엔드 유저는 인증을 하지 않아도 된다. 이 블로그에서는 비인증 유저에게 통계 데이터를 제공해야 하므로 나는 서비스 애플리케이션에 해당하는 시나리오로 인증을 구현했다.</p>
<p>
  <a class="gatsby-resp-image-link" href="/static/serviceaccount-8c918d9ce24b7619b2c22b8b280ea368-8a420.png" target="_blank" rel="noopener">
  
  <span class="gatsby-resp-image-wrapper">
    <span class="gatsby-resp-image-background-image">
      <amp-img class="gatsby-resp-image-image" alt="서비스 애플리케이션" title="" src="/static/serviceaccount-8c918d9ce24b7619b2c22b8b280ea368-8a420.png" srcset="/static/serviceaccount-8c918d9ce24b7619b2c22b8b280ea368-e1858.png 265w,
/static/serviceaccount-8c918d9ce24b7619b2c22b8b280ea368-8a420.png 325w" sizes="(max-width: 325px) 100vw, 325px" width="325" height="300" layout="responsive"></amp-img>
    </span>
  </span>
  
  </a>
    
<em>서비스 애플리케이션 인증 시나리오</em></p>
<p>웹 애플리케이션은 엔드 유저에게 로그인을 요구한다. 이 시나리오는 소셜 로그인이나 SNS 공유를 하려고 할 때 해당 서비스에 로그인을 요구하는 사례에 해당한다.</p>
<p>
  <a class="gatsby-resp-image-link" href="/static/webflow-2b6673124e0d52d4fa1e012f2382db1b-b5b1c.png" target="_blank" rel="noopener">
  
  <span class="gatsby-resp-image-wrapper">
    <span class="gatsby-resp-image-background-image">
      <amp-img class="gatsby-resp-image-image" alt="웹 애플리케이션" title="" src="/static/webflow-2b6673124e0d52d4fa1e012f2382db1b-b5b1c.png" srcset="/static/webflow-2b6673124e0d52d4fa1e012f2382db1b-90677.png 265w,
/static/webflow-2b6673124e0d52d4fa1e012f2382db1b-b5b1c.png 364w" sizes="(max-width: 364px) 100vw, 364px" width="365" height="375" layout="responsive"></amp-img>
    </span>
  </span>
  
  </a>
    
<em>웹 애플리케이션 인증 시나리오</em></p>
<p>그리고 나머지 하나는 설치형 애플리케이션을 위한 시나리오인데, 안드로이드, iOS 앱 및 기타 설치형 애플리케이션에 해당하는 시나리오다.</p>
<h2 id="flask-프레임워크"><a href="#flask-%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>Flask 프레임워크</h2>
<p>인기 있는 파이썬 프레임워크로는 Django, Flask가 있는데 Django는 지원하는 기능이 무척 많고 덩치가 크다. 나는 최소한의 기능만 있으면 되기에 가벼움 그 자체인 Flask를 선택했다. Flask 홈페이지에도 <a href="http://flask.pocoo.org" target="_blank" rel="nofollow">“Flask is a microframework for Python”</a>이라고 소개되어 있을 정도다.</p>
<p>처음 시도한 프레임워크였기에 환경 설정, 에디터 설정, 패키지 관리 등 개발 외적인 작업에 들어간 시간이 많았지만 필요한 기능 자체는 시작일, 종료일과 컨텐츠 경로를 기준으로 한 페이지뷰 카운트 데이터를 가져오는 것 하나여서 아주 오랜 시간이 걸리지는 않았다. 그리고 개발을 진행하다 보니, 파이썬은 문법이 무척 간결해서 익숙해지기만 한다면 무척 사용하기 즐거울 것 같았다. 언젠가 파이썬으로 더 많은 것을 해 보고 싶어졌다.</p>
<h2 id="uwsgi로-파이썬-앱-배포하기"><a href="#uwsgi%EB%A1%9C-%ED%8C%8C%EC%9D%B4%EC%8D%AC-%EC%95%B1-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>uWSGI로 파이썬 앱 배포하기</h2>
<p><a href="https://ko.wikipedia.org/wiki/%EC%9B%B9_%EC%84%9C%EB%B2%84_%EA%B2%8C%EC%9D%B4%ED%8A%B8%EC%9B%A8%EC%9D%B4_%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4" target="_blank" rel="nofollow">WSGI</a>는 Web Server Gateway Inerface의 약자로서, 웹 서버(etc. nginx)와 파이썬 웹 애플리케이션 사이의 통신을 위한 프로토콜이다. 과거에는 파이썬 앱이 웹 서버와 통신하기 위한 선택지에 제한이 있었기에 보다 다양한 방법으로 통신하기 위해 만들어졌다고 한다.</p>
<p>Flask로 만든 앱은 WSGI 스펙을 기반으로 한 앱이 된다. 그런데 nginx 웹 서버는 WSGI 스펙을 구현해두지 않았기 때문에 Flask 앱과 직접 통신할 수가 없다. 그래서 <a href="https://uwsgi-docs.readthedocs.io/en/latest/" target="_blank" rel="nofollow">uWSGI</a> 서버를 중간에 둔다. uWSGI는 WSGI 스펙을 구현한 서버인 동시에 프로토콜이며, nginx와도 통신할 수 있다. uWSGI가 nginx와 Flask 앱 중간에서 미들웨어 역할을 하게 되는 것이다.</p>
<h3 id="uwsgi-엔트리-포인트-작성"><a href="#uwsgi-%EC%97%94%ED%8A%B8%EB%A6%AC-%ED%8F%AC%EC%9D%B8%ED%8A%B8-%EC%9E%91%EC%84%B1" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>uWSGI 엔트리 포인트 작성</h3>
<p>기존의 앱 메인 파일 외에 uWSGI 서버 실행을 위한 엔트리 포인트 역할을 할 모듈을 별도로 추가한다.</p>
<div class="gatsby-highlight">
      <pre class="language-python"><code class="language-python"><span class="token comment"># wsgi.py</span>
<span class="token keyword">from</span> app <span class="token keyword">import</span> app

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    app<span class="token punctuation">.</span>run<span class="token punctuation">(</span><span class="token punctuation">)</span></code></pre>
      </div>
<h3 id="uwsgi-서버-실행"><a href="#uwsgi-%EC%84%9C%EB%B2%84-%EC%8B%A4%ED%96%89" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>uWSGI 서버 실행</h3>
<p>uwsgi를 설치한 후 엔트리 포인트로 서버를 구동한다.</p>
<div class="gatsby-highlight">
      <pre class="language-sg"><code class="language-sg">uwsgi --socket 0.0.0.0:5000 --protocol=http -w wsgi:app</code></pre>
      </div>
<p>커맨드라인으로 실행도 가능하지만 역시 설정파일을 따로 두는 것이 좋다.</p>
<div class="gatsby-highlight">
      <pre class="language-ini"><code class="language-ini"># myproject.ini
<span class="token selector">[uwsgi]</span>
<span class="token constant">module</span> <span class="token attr-value"><span class="token punctuation">=</span> wsgi:app</span>

<span class="token constant">master</span> <span class="token attr-value"><span class="token punctuation">=</span> true</span>
<span class="token constant">processes</span> <span class="token attr-value"><span class="token punctuation">=</span> 5</span>

<span class="token constant">socket</span> <span class="token attr-value"><span class="token punctuation">=</span> blogapi.sock # uWSGI가 만드는 socket 파일의 이름. nginx와 연결할 때 사용된다.</span>
<span class="token constant">chmod-socket</span> <span class="token attr-value"><span class="token punctuation">=</span> 660</span>
<span class="token constant">vacuum</span> <span class="token attr-value"><span class="token punctuation">=</span> true</span></code></pre>
      </div>
<p>설정파일을 만든 후에는 아래와 같은 방식으로 실행한다.</p>
<div class="gatsby-highlight">
      <pre class="language-shell"><code class="language-shell">uwsgi —ini blogapi.ini</code></pre>
      </div>
<p>실행하면 앱을 실행한 위치에 <code class="language-text">blogapi.sock</code>라는 이름의 소켓 파일이 만들어질 것이다.</p>
<h3 id="nginx-서버에-uwsgi-소켓-연결"><a href="#nginx-%EC%84%9C%EB%B2%84%EC%97%90-uwsgi-%EC%86%8C%EC%BC%93-%EC%97%B0%EA%B2%B0" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>nginx 서버에 uWSGI 소켓 연결</h3>
<p><a href="https://uwsgi-docs.readthedocs.io/en/latest/Nginx.html" target="_blank" rel="nofollow">nginx에 가상 호스트를 추가하고 uWSGI 소켓을 연결</a>한다.</p>
<div class="gatsby-highlight">
      <pre class="language-nginx"><code class="language-nginx"><span class="token comment"># /etc/nginx/sites-enabled/blogapi</span>
<span class="token keyword">server</span> <span class="token punctuation">{</span>
    <span class="token keyword">listen</span> <span class="token number">80</span><span class="token punctuation">;</span>
    <span class="token keyword">server_name</span> blogapi<span class="token punctuation">.</span>rhostem<span class="token punctuation">.</span>com<span class="token punctuation">;</span>

    <span class="token keyword">location</span> <span class="token operator">/</span> <span class="token punctuation">{</span>
        <span class="token comment"># uWSGI가 만든 소켓 파일을 연결한다.</span>
        uwsgi_pass unix<span class="token punctuation">:</span><span class="token operator">/</span>home<span class="token operator">/</span>ubuntu<span class="token operator">/</span>www<span class="token operator">/</span>blogapi<span class="token operator">/</span>blogapi<span class="token punctuation">.</span>sock<span class="token punctuation">;</span>
        <span class="token keyword">include</span> uwsgi_params<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
      </div>
<p>nginx 서버를 재시작하면 이제 <code class="language-text">http://blogapi.rhostem.com</code>을 통해 앱에 접속할 수 있다.</p>
<h3 id="flask-앱-자동-시작을-위한-시스템-서비스-등록"><a href="#flask-%EC%95%B1-%EC%9E%90%EB%8F%99-%EC%8B%9C%EC%9E%91%EC%9D%84-%EC%9C%84%ED%95%9C-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%84%9C%EB%B9%84%EC%8A%A4-%EB%93%B1%EB%A1%9D" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>Flask 앱 자동 시작을 위한 시스템 서비스 등록</h3>
<p>서버가 재시작될 때 Flask 앱도 자동으로 시작하도록 시스템 서비스 파일을 만들어서 등록하면 앱 관리가 더욱 편해진다. ubuntu의 시스템 서비스 파일은 <code class="language-text">/etc/systemd/system</code> 폴더에 만든다.</p>
<div class="gatsby-highlight">
      <pre class="language-systemd"><code class="language-systemd"># /etc/systemd/system/blogapi.service

[Unit]
Description=uWSGI instance to serve flask app blog-api
After=network.target

[Service]
User=ubuntu # 로그인 사용자
Group=www-data
WorkingDirectory=/home/ubuntu/www/blogapi # 실행 디렉토리
Environment=&quot;PATH=/home/ubuntu/www/blogapi/venv/bin&quot; # 환경 변수
ExecStart=/home/ubuntu/www/blogapi/venv/bin/uwsgi --ini blogapi.ini # 실행 명령어

[Install]
WantedBy=multi-user.target # 자동 실행</code></pre>
      </div>
<p>서비스 실행 명령어는 아래와 같다.</p>
<div class="gatsby-highlight">
      <pre class="language-shell"><code class="language-shell">sudo systemctl start blogapi
sudo systemctl enable blogapi</code></pre>
      </div>
<h2 id="그-외의-작업들"><a href="#%EA%B7%B8-%EC%99%B8%EC%9D%98-%EC%9E%91%EC%97%85%EB%93%A4" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>그 외의 작업들</h2>
<p>이 외에도 파이썬 프로젝트를 위한 virtualenv 설정, pip로 패키지 관리하기, CORS 설정, rhostem.github.io가 https 프로토콜을 사용하기 때문에 Certbot으로 무료 인증서 설치하기 등의 작업이 필요했다. 이번에 구현한 파이썬 서버는 아래 링크된 저장소에서 확인할 수 있다.</p>
<p><a href="https://github.com/rhostem/blog-api" target="_blank" rel="nofollow">rhostem/blog-api: api service for blog</a></p>
<h2 id="참고-자료"><a href="#%EC%B0%B8%EA%B3%A0-%EC%9E%90%EB%A3%8C" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewbox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"/></svg></a>참고 자료</h2>
<ul>
<li><a href="https://stackoverflow.com/questions/38601440/what-is-the-point-of-uwsgi" target="_blank" rel="nofollow">python - What is the point of uWSGI? - Stack Overflow</a></li>
<li><a href="https://developers.google.com/identity/protocols/OAuth2#serviceaccount" target="_blank" rel="nofollow">Using OAuth 2.0 to Access Google APIs</a></li>
<li><a href="https://www.digitalocean.com/community/tutorials/how-to-serve-flask-applications-with-uswgi-and-nginx-on-ubuntu-18-04" target="_blank" rel="nofollow">How To Serve Flask Applications with uWSGI and Nginx on Ubuntu</a></li>
<li><a href="https://askubuntu.com/questions/894665/add-startup-service-on-16-04" target="_blank" rel="nofollow">add startup service on 16.04 - Ask Ubuntu</a></li>
</ul></article><div class="sc-fAjcbJ ifYIyX" data-reactid="66"><button class="sc-dVhcbM ixxIMy" data-reactid="67"><i class="fa fa-2x fa-facebook-square" data-reactid="68"></i></button><a class="sc-eqIVtm eyZGpZ" href="https://twitter.com/intent/tweet?text=%EA%B5%AC%EA%B8%80%20%EC%95%A0%EB%84%90%EB%A6%AC%ED%8B%B1%EC%8A%A4%20API%EB%A5%BC%20%EC%82%AC%EC%9A%A9%ED%95%9C%20Flask%20%EC%95%B1%EC%9D%84%20uWSGI%EC%99%80%20nginx%EB%A1%9C%20%EB%B0%B0%ED%8F%AC%ED%95%9C%20%EA%B3%BC%EC%A0%95&amp;url=https%3A%2F%2Frhostem.github.io%2Fposts%2F2018-11-20-deploy-flask-with-uwsgi%2F" target="_blank" data-reactid="69"><i class="fa fa-2x fa-twitter" data-reactid="70"></i></a></div><div id="disqus_thread" data-reactid="71"></div></div><footer class="sc-hMqMXs QDZKQ" data-reactid="72"><div class="sc-kEYyzF fmiYEn" data-reactid="73"><div class="sc-kkGfuU eFqbjC" data-reactid="74"><span data-reactid="75">Copyright © 2018. </span><a class="sc-iAyFgw hmhDOj" href="https://www.github.com/rhostem" data-reactid="76">rhostem</a><span data-reactid="77"> All rights reserved</span></div><div class="sc-hSdWYo cAbZbn" data-reactid="78"><a href="https://www.github.com/rhostem" data-reactid="79"><i class="fa fa-github" data-reactid="80"></i></a><a href="mailto:syoung.j@gmail.com" data-reactid="81"><i class="fa fa-envelope-o" data-reactid="82"></i></a><a href="/rss.xml" data-reactid="83"><i class="fa fa-rss" data-reactid="84"></i></a></div><div class="sc-eHgmQL cuRlhx" data-reactid="85"><p data-reactid="86">powered by</p><a href="https://www.gatsbyjs.org/" target="_blank" rel="noopener noreferrer" data-reactid="87"></a></div></div></footer></main></div></div></body></html>