<!DOCTYPE html>
 <html lang="ko" amp=""><head><style amp-boilerplate="">body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate="">body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript><style amp-custom="">._1lkeM08JhCnwSn2DVeoecR:after{content:"";display:block;clear:both}._1lkeM08JhCnwSn2DVeoecR{position:absolute;top:0;left:0;width:100%;background:-webkit-linear-gradient(left,#4568dc,#b06ab3);background:linear-gradient(90deg,#4568dc,#b06ab3);border-bottom:1px solid #ebebeb}._3vtsIDAmz41DMSTnifGo8Z{max-width:1070px;margin-left:auto;margin-right:auto;padding-right:1rem;padding-left:1rem}._3vtsIDAmz41DMSTnifGo8Z:before{content:"";display:table}._3vtsIDAmz41DMSTnifGo8Z:after{content:"";display:table;clear:both}._1xAxZ9JAz_Q9hTR07A6SFz{float:left;margin:0;color:#fff;font-weight:100;font-size:1.2rem;font-family:PT Sans Narrow,sans-serif;line-height:3rem;letter-spacing:0}._2HBj6PUI-wllZhmH4Doygj{float:left;list-style:none;padding-left:0}._2zoPwXn25_5i1_U9Mb64bH{font-size:16px;line-height:3rem;font-weight:400;color:#222}._27R8rQLWPSjk1H33uu2gky ul li a._254VQs_6m4dyEzsHnuRLbc,._27R8rQLWPSjk1H33uu2gky ul li a:hover{border-bottom:1px solid}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,cite,code,details,figcaption,figure,footer,header,hgroup,main,nav,section,small,summary{display:block}article,article ol,article ul,blockquote,body,div,figure,footer,header,input,nav,section{box-sizing:border-box}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background:transparent}a:active,a:hover{outline:0}abbr{letter-spacing:.1em}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}mark{background:#ff0;color:#000}small{font-size:70%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}em,i{line-height:0;position:relative;vertical-align:baseline}img{border:0}svg:not(:root){overflow:hidden}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}img{max-width:100%;display:block;margin:inherit auto}body{letter-spacing:-.02em}h1{letter-spacing:-.05em}h2,h3,h4,h5,h6{letter-spacing:-.03em}@media screen and (min-width:40em){.floatLeft{float:left}}@media screen and (min-width:40em){.floatCenter{margin-left:auto;margin-right:auto}}@media screen and (min-width:40em){.floatRight{float:right}}@media screen and (min-width:40em){body,html{margin:0;width:100%;max-width:none}}html{box-sizing:border-box;font-size:16px;font-size:100%;font-size:calc(16px + 2 * ((100vw - 480px) / 800));line-height:1.625;color:#222;font-family:Noto Sans KR,AppleSDGothicNeo-Regular,Malgun Gothic,"\B9D1\C740   \ACE0\B515",dotum,\\B3CB\C6C0,sans-serif;-webkit-font-smoothing:antialiased;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}@media screen and (min-width:1280px){html{font-size:18px}}@media screen and (max-width:480px){html{font-size:16px}}*,:after,:before{box-sizing:inherit}body{margin:0}footer{display:block}body>footer{margin:0 auto;width:80%}header,main,section{display:block}p{margin:1.75rem auto}a{background:transparent;color:#222;text-decoration:none;-webkit-transition:all .3s;transition:all .3s;word-break:break-all}a:active,a:hover{outline:0}a:active,a:hover{color:#222}article{display:block;margin:0 auto;width:80%}@media screen and (min-width:40em){article{max-width:945px;max-width:52.5rem}}audio{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}canvas{display:inline-block;vertical-align:baseline}pre{overflow:auto}code,kbd,pre,samp{font-family:Droid Sans Mono,monospace,Courier}code{display:block;padding:26px;padding:1.625rem}@media screen and (min-width:40em){code{padding:31px;padding:1.722222222222222rem}}details,figcaption,summary{display:block}figcaption{line-height:26px;line-height:1.625rem;color:#222;font-size:.8125rem;margin-bottom:0;color:rgba(34,34,34,.7);text-align:center}@media screen and (min-width:40em){figcaption{line-height:31px;line-height:1.722222222222222rem;margin-top:.75rem;margin-bottom:0}}figure{display:block;margin:2rem auto}@media screen and (min-width:40em){figure.floatLeft,figure.floatRight{max-width:315px;max-width:17.5rem;padding:0 31px;padding:0 1.722222222222222rem}}@media screen and (min-width:40em){figure.floatLeft blockquote,figure.floatRight blockquote{padding:0;text-align:left}}@media screen and (min-width:40em){figure.floatLeft blockquote p,figure.floatRight blockquote p{font-size:19.2px;font-size:1.2rem;line-height:31px;line-height:1.722222222222222rem}}h1{font-size:40px;font-size:2.5rem;line-height:52px;line-height:3.25rem;margin-top:104px;margin-top:6.5rem;margin-bottom:26px;margin-bottom:1.625rem}h2{font-size:27px;font-size:1.6875rem;line-height:39px;line-height:2.4375rem;margin-top:65px;margin-top:4.0625rem;margin-bottom:13px;margin-bottom:.8125rem}h3{font-size:22px;font-size:1.375rem;margin-top:52px;margin-top:3.25rem}h3,h4{line-height:26px;line-height:1.625rem;margin-bottom:13px;margin-bottom:.8125rem}h4{font-size:19.2px;font-size:1.2rem;margin-top:39px;margin-top:2.4375rem}h5,h6{font-size:16px;font-size:1rem;line-height:26px;line-height:1.625rem;margin-top:65px;margin-top:4.0625rem;margin-bottom:13px;margin-bottom:.8125rem}h1,h2,h3,h4,h5,h6{word-break:keep-all;word-wrap:break-word}@media screen and (min-width:40em){h1{font-size:40px;font-size:2.5xrrem;line-height:62px;line-height:3.444444444444445rem;margin-top:124px;margin-top:6.888888888888889rem;margin-bottom:31px;margin-bottom:1.722222222222222rem}h2{font-size:27px;font-size:1.6875rem;line-height:46.5px;line-height:2.583333333333334rem;margin-top:77.5px;margin-top:4.305555555555556rem;margin-bottom:15.5px;margin-bottom:.861111111111111rem}h3{font-size:22px;font-size:1.375rem;margin-top:62px;margin-top:3.444444444444445rem}h3,h4{line-height:31px;line-height:1.722222222222222rem;margin-bottom:15.5px;margin-bottom:.861111111111111rem}h4{font-size:19.2px;font-size:1.2rem;margin-top:46.5px;margin-top:2.583333333333334rem}h5,h6{font-size:16px;font-size:1rem;line-height:31px;line-height:1.722222222222222rem;margin-top:77.5px;margin-top:4.305555555555556rem;margin-bottom:15.5px;margin-bottom:.861111111111111rem}}h1+h2{margin-top:26px;margin-top:1.625rem}@media screen and (min-width:40em){h1+h2{margin-top:31px;margin-top:1.722222222222222rem}}h2+h3,h3+h4,h4+h5{margin-top:13px;margin-top:.8125rem}@media screen and (min-width:40em){h2+h3,h3+h4,h4+h5{margin-top:15.5px;margin-top:.861111111111111rem}}h5+h6{margin-top:-13px;margin-top:-.8125rem}@media screen and (min-width:40em){h5+h6{margin-top:-15.5px;margin-top:-.861111111111111rem}}h6{font-style:italic;font-weight:400}hgroup,hr{display:block}hr{margin-top:52px;margin-bottom:52px;box-sizing:content-box;border:0;color:#222;margin:3.25rem auto;width:50%;height:1px;background-image:-webkit-linear-gradient(left,rgba(34,34,34,.2),rgba(34,34,34,.75),rgba(34,34,34,.2));background-image:linear-gradient(90deg,rgba(34,34,34,.2),rgba(34,34,34,.75),rgba(34,34,34,.2))}@media screen and (min-width:40em){hr{margin-top:62px;margin-top:3.444444444444445rem;margin-bottom:62px;margin-bottom:3.444444444444445rem}}img{border:0;max-width:100%;display:block;margin:inherit auto}svg:not(:root){overflow:hidden}ol li,ul li{margin-bottom:.75em}nav{display:block}progress{display:inline-block;vertical-align:baseline}blockquote{margin:2.25rem 0 2.25rem -19.2px;padding-left:calc(1em - 3px);font-style:italic;border-left:3px solid #222;color:rgba(0,0,0,.6)}cite{display:block;font-style:normal}figure blockquote{padding:26px 0;padding:1.625rem 0}@media screen and (min-width:40em){figure blockquote{padding:62px 0 31px;padding:3.444444444444445rem 0 1.722222222222222rem;text-align:center}}figure blockquote p{font-size:27px;font-size:1.6875rem;line-height:39px;line-height:2.4375rem}@media screen and (min-width:40em){figure blockquote p{font-size:27px;font-size:1.6875rem;line-height:46.5px;line-height:2.583333333333334rem}}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}[hidden],template{display:none}abbr{letter-spacing:.1em}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700;background-color:transparent;background-image:-webkit-linear-gradient(top,rgba(39,243,106,.1),rgba(39,243,106,.1));background-image:linear-gradient(180deg,rgba(39,243,106,.1),rgba(39,243,106,.1))}dfn{font-style:italic}em,i{line-height:0;position:relative;vertical-align:baseline}mark{background:#ff0;color:#000}small{line-height:13px;line-height:.8125rem;font-size:70%}@media screen and (min-width:40em){small{line-height:15.5px;line-height:.861111111111111rem}}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}.attention-grabber{font-size:19.2px;font-size:1.2rem}.alignLeft{text-align:left}.alignCenter{text-align:center}.alignRight{text-align:right}.uppercase{letter-spacing:.1em;text-transform:uppercase}video{display:inline-block;vertical-align:baseline}@font-face{font-family:Droid Sans Mono;font-style:normal;font-weight:400;src:local("Droid Sans Mono"),local("DroidSansMono"),url(https://fonts.gstatic.com/s/droidsansmono/v7/ns-m2xQYezAtqh7ai59hJVlgUn8GogvcKKzoM9Dh-4E.woff2) format("woff2");unicode-range:u+00??,u+0131,u+0152-0153,u+02c6,u+02da,u+02dc,u+2000-206f,u+2074,u+20ac,u+2212,u+2215}._2p_A6KEfS9E7S_lV_Ho9kX:after{content:"";display:block;clear:both}._1DRfYVqYtJYX-XdYgKDzZX{float:left;display:block;padding:4px 10px;margin-bottom:4px;font-size:.8rem;color:rgba(0,0,0,.6);background-color:rgba(0,0,0,.04);border-radius:3px}._1DRfYVqYtJYX-XdYgKDzZX:hover{background-color:rgba(0,0,0,.1)}._1DRfYVqYtJYX-XdYgKDzZX:not(:last-child){margin-right:4px}._13qA-KSZqJDxRAI1Q18vSq{position:absolute;bottom:0;width:100%;background-color:#fff;border-top:1px solid #ebebeb}._3MVqerTEmSgjPrIo96oo4V{position:relative;margin-top:2px;padding:1rem;max-width:1070px;margin-left:auto;margin-right:auto;min-height:3.5rem;font-size:.8rem}._3MVqerTEmSgjPrIo96oo4V:before{content:"";display:table}._3MVqerTEmSgjPrIo96oo4V:after{content:"";display:table;clear:both}._197Lsc3-Nl2h356C-02yi{float:left}._1FzwQvAaknkKTlCYtcCU-a{text-decoration:underline}._322qsx9AYZtOycOgJcW4xe{float:right;font-size:1rem}._322qsx9AYZtOycOgJcW4xe>*{margin-left:.5em}a>code,h1>code,h2>code,h3>code,h4>code,h5>code,li>code,p>code,span>code{border-radius:3px;white-space:pre;white-space:pre-wrap;white-space:pre-line;white-space:-pre-wrap;white-space:-o-pre-wrap;white-space:-moz-pre-wrap;white-space:-hp-pre-wrap;word-wrap:break-word;background:#f8f8f8;display:inline;max-width:100%;overflow:auto;padding:.1em .5em}pre code{padding:.5em 1em;font-size:.85em;border:1px solid #d1d5da;background-color:#fff;border-radius:3px;box-shadow:inset 0 1px 2px rgba(27,31,35,.075)}.hljs,pre code{display:block;overflow-x:auto;color:#333}.hljs{background:#fff;padding:.5em}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-string,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#a71d5d}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-symbol{color:#0086b3}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#795da3}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.Post{max-width:740px;margin-left:auto;margin-right:auto;margin-bottom:3.444rem;padding-right:2rem;padding-left:2rem;background-color:#fff}.Post h1{text-align:left;font-weight:700}.Post a{text-decoration:underline}.Post:before{content:"";display:table}.Post:after{content:"";display:table;clear:both}@media (max-width:900px){.Post{padding:0 1.5rem;margin-bottom:26px}}@media (max-width:500px){.Post{padding:0 1.2rem;margin-bottom:26px}}.Post-postDesc,.Post-text{margin-bottom:3.4444rem}.Post-text img{max-width:100%;height:auto;margin:0 auto}.Post .text{margin-left:auto;margin-right:auto}.date-published{margin:.7rem 0;color:rgba(0,0,0,.44);font-size:.9rem}.blog-page{margin-bottom:40px}.blog-page h1{font-size:calc(20px + 16 * ((100vw - 480px) / 800));margin-top:0}@media screen and (min-width:1280px){.blog-page h1{font-size:36px}}@media screen and (max-width:480px){.blog-page h1{font-size:20px}}.blog-page p{font-size:16px;line-height:26px;margin-bottom:26px}._3tsckNsI_zTYrOZaXR_6IK{max-width:740px;margin-left:auto;margin-right:auto;padding:2rem 1rem}._3tsckNsI_zTYrOZaXR_6IK:before{content:"";display:table}._3tsckNsI_zTYrOZaXR_6IK:after{content:"";display:table;clear:both}._1W3__fR7m7-eydodz7wXg0{display:block;background-color:#fff;border:1px solid rgba(0,0,0,.09);margin:2rem 0}._1W3__fR7m7-eydodz7wXg0:first-child{margin-top:0}._1W3__fR7m7-eydodz7wXg0:last-child{margin-bottom:0}._1v4BsZYq6EZY87pcU4y8vJ{width:100%;height:250px;margin:0 auto;background-size:cover;background-position:50% 0;background-repeat:no-repeat}@media (max-width:500px){._1v4BsZYq6EZY87pcU4y8vJ{height:200px}}.XEajKE3_W-950W0ElCBTZ{padding:1.75rem}@media (max-width:500px){.XEajKE3_W-950W0ElCBTZ{padding:1.25rem}}._3_YP2CwjRKGCGvmxb5Qeuu{margin:0 0 .5rem;font-size:1.45rem;font-weight:400;line-height:1.625}._27vnzMOPVXq0srZTmcN9Xv{display:-webkit-box;width:100%;max-height:2.8rem;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis;word-wrap:break-word;font-size:.85rem;line-height:1.4rem}@media (max-width:500px){._27vnzMOPVXq0srZTmcN9Xv{margin-top:1rem}}.nlwbSIcVOpLNqdNGWSOmC{margin-top:1rem}._3q_ody9XsqqwLyXvmPvz64:after{content:"";display:block;clear:both}._3q_ody9XsqqwLyXvmPvz64{margin-top:.75rem}@media (max-width:500px){._3q_ody9XsqqwLyXvmPvz64{margin-top:.75rem}}._2HVW_-guxNFIRLdWPDJIMU{font-size:.8rem;color:rgba(0,0,0,.44)}._3KOLrobI5ED2v88kJg7PC9{float:right;font-size:.8rem;color:#b06ab3;background:rgba(176,106,179,.93333)}&:not(:last-child){margin-bottom:1rem}.wrapper{position:relative;padding-top:3rem;padding-bottom:3.5rem;min-height:100vh}.content{max-width:1070px;margin-left:auto;margin-right:auto;background-color:#fff}.content:after,.content:before{content:"";display:table}.content:after{clear:both}</style><meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><link rel="icon" type="image/x-icon" href="/favicon.ico"><title data-react-helmet="true">[번역] Flow와 TypeScript의 채택 - 두 프로세스의 비교 - rhostem.github.io</title><link rel="canonical" href="/posts/2017-06-11-adopting-flow-and-typescript/"><script async src="https://cdn.ampproject.org/v0.js"></script><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Open+Sans%3A400%2C700%2C300%2C800&ver=4.6.1"></head><body><div id="react-mount"><div class="wrapper" data-reactroot="" data-reactid="1" data-react-checksum="-742957118"><nav class="_1lkeM08JhCnwSn2DVeoecR" data-reactid="2"><div class="_3vtsIDAmz41DMSTnifGo8Z" data-reactid="3"><a href="/" data-reactid="4"><h1 class="_1xAxZ9JAz_Q9hTR07A6SFz" data-reactid="5">rhostem.github.io</h1></a></div></nav><div data-reactid="6"><!-- react-empty: 7 --><div data-reactid="8"><!-- react-empty: 9 --><div class="content" data-reactid="10"><div class="Post" data-reactid="11"><div class="Post-text" data-reactid="12"><h1 data-reactid="13">[번역] Flow와 TypeScript의 채택 - 두 프로세스의 비교</h1><div class="Post-postDesc" data-reactid="14"><div class="_2p_A6KEfS9E7S_lV_Ho9kX" data-reactid="15"><span class="_1DRfYVqYtJYX-XdYgKDzZX" data-reactid="16">TypeScript</span><span class="_1DRfYVqYtJYX-XdYgKDzZX" data-reactid="17">Flow</span><span class="_1DRfYVqYtJYX-XdYgKDzZX" data-reactid="18">Javascript</span></div><div class="date-published" data-reactid="19">2017년 6월 11일</div></div><div data-reactid="20"><p>이 글은 James Kyle의 <a href="http://thejameskyle.com/adopting-flow-and-typescript.html">Adopting Flow &amp; TypeScript - A comparison between the two on-boarding processes</a>를 번역한 글입니다.</p>
<hr>
<p>우리가 타입 검사기를 도입한다고 가정해보자.</p>
<p>앱 개발 중에 NaN값이 많이 발생해서 원인을 찾아보았고 아래의 코드를 찾을 수 있었다.</p>
<pre><code class="language-javascript"><span class="hljs-comment">// math.js</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">square</span>(<span class="hljs-params">n</span>) </span>{
 <span class="hljs-keyword">return</span> n * n;
}
square(<span class="hljs-string">"oops"</span>);
</code></pre>
<p>한숨을 쉬면서 이제는 정말로 타입 검사기를 도입해야겠다고 결심하게 된다. 그리고 한발 물러서서 우리에게 어떤 대안이 있는지 알아본다: <a href="https://flow.org/">Flow</a>와 <a href="http://www.typescriptlang.org/">TypeScript</a>가 있다.</p>
<p>둘다 간단하게 파일별로 채택이 가능하다.</p>
<ul>
<li>Flow: <code>// @flow</code> 코멘트를 파일 최상단에 추가한다.</li>
<li>TypeScript: 파일의 확장자 <code>.js</code>를 <code>.ts</code>로 변경한다.</li>
</ul>
<p>하지만 각각 어떤 일이 일어나는지 비교해보자.</p>
<h2>TypeScript 채택</h2>
<p>TypeScript를 채택하기 위해서는 우선 확장자 <code>.js</code>를 <code>.ts</code>로 변경한다.</p>
<pre><code class="language-javascript"><span class="hljs-comment">// math.ts</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">square</span>(<span class="hljs-params">n</span>) </span>{
 <span class="hljs-keyword">return</span> n * n;
}
square(<span class="hljs-string">"oops"</span>);
</code></pre>
<p>그러고는 TypeScript를 실행한다.</p>
<pre><code class="language-javascript">(no errors)
</code></pre>
<p>TypeScript는 아래와 같이 우리가 함수의 인자에 직접 타입 주석(annotation)을 작성하도록 요구하기 때문에 오류가 발생하지 않는다.</p>
<pre><code class="language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">square</span>(<span class="hljs-params">n: number</span>): <span class="hljs-title">number</span> </span>{
 <span class="hljs-keyword">return</span> n * n;
}
square(<span class="hljs-string">"oops"</span>);
</code></pre>
<p>그런데 타입 주석이 없으면 TypeScript는 설정에 기반을 둬 아래 두 가지 행동 중에서 하나를 실행한다.</p>
<ol>
<li>확인되지 않은 모든 타입을 <code>any</code> 타입으로 묵시적으로 형 변환(cast)한다. <code>any</code> 타입은 타입 체크를 하지 않는다.</li>
<li>만약 <code>--noImplicitAny</code> 옵션을 사용하고 있다면 확인되지 않은 모든 타입에 대해 에러를 발생시킨다.</li>
</ol>
<p>이는 TypeScript에 의해 <em>적용</em>(cover)되는 범위는 당신이 직접 작성한 타입에 의해 결정된다는 말이다. 타입 적용 범위는 타입을 작성함에 따라 <em>선형적</em>으로 증가한다.</p>
<h2>타입 적용 범위(Type coverage)</h2>
<p>조금 더 깊이 들어가기 전에, 타입 적용 범위에 관한 설명을 해야겠다.</p>
<p><amp-img src="/posts/2017-06-11-adopting-flow-and-typescript/./type-coverage.png" alt="Type Coverage" width="740" height="475" layout="responsive"></amp-img></p>
<blockquote>
<p>적용되지 않은 코드는 붉은색으로 강조되었다.</p>
</blockquote>
<p>당신이 코드에서 값과 표현 식을 살펴본 후 타입 체커에게 무슨 타입인지 알겠냐고 물어봤다고 가정하자.</p>
<p>만약 타입 체커가 안다고 대답한다면 그 값과 표현 식은 적용되었다고 할 수 있다. 타입 체커가 모른다면 그렇지 않은 것이다.</p>
<p>코드에서 명시될 수 있는 모든 타입들 중에서 타입 체커가 파악한 타입의 백분율이 &quot;타입 적용 범위&quot;다.</p>
<p>당신은 당신의 프로그램이 가능한 높은 적용 범위를 가지기를 바랄 것이다. 그럴수록 타입 체커가 더 많은 실수를 확인해줄 수 있기 때문이다.</p>
<p>타입을 하나도 파악하지 못한다면 타입 체커는 아무것도 아니다.</p>
<h2>Flow 채택</h2>
<pre><code class="language-javascript"><span class="hljs-comment">// @flow</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">square</span>(<span class="hljs-params">n</span>) </span>{
 <span class="hljs-keyword">return</span> n * n;
}
square(<span class="hljs-string">"oops"</span>);
</code></pre>
<p>Flow를 실행시키면 아래와 같은 결과를 볼 수 있다.</p>
<pre><code class="language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">square</span>(<span class="hljs-params">n</span>) </span>{
 <span class="hljs-keyword">return</span> n * n;
        ^   ^
 <span class="hljs-built_in">Error</span> (x2)
}
square(<span class="hljs-string">"oops"</span>);

&gt; <span class="hljs-built_in">Error</span> (x2)
&gt; string. The operand <span class="hljs-keyword">of</span> an arithmetic operation must be a number.
</code></pre>
<p>즉시 <em>무엇</em>인가가 잘못되었다는 타입 에러가 발생한다.</p>
<p>Flow는 우리에게 직접 타입을 명시하라고 하지 않았다. 그저 소스 코드 상단에 Flow로 타입을 체크하겠다는 플래그를 추가하고 외부 모듈을 설치하기만을 요구했을 뿐이다. 다른 모든 것은 <em>추론</em>에 의해 가능했다.</p>
<p>이는 타입 적용 범위가 훨씬 더 빠르게 증가할 수 있도록 해 준다. 타입을 많이 명시하지 않아도 높은 타입 적용 범위를 가진 코드를 얻을 수 있다.</p>
<p>내 경험상으로는 70-90%의 타입 적용 범위를 가진 소스 파일을 얻을 수 있었다.</p>
<p>바로 아래에 차이점을 보여주는 아주 과학적인 그래프가 있다.</p>
<p><amp-img src="/posts/2017-06-11-adopting-flow-and-typescript/./adopting-flow-and-typescript-graph.png" alt="adopting flow and typescript graph" width="1865" height="1015" layout="responsive"></amp-img></p>
<p>이는 나의 개인적인 의견이 아니다. 직접 실행해서 적은 수의 타입이 만들어내는 타입 적용 범위의 차이를 직접 확인해볼 수 있다.</p>
<p>Flow에서 파일의 타입 적용 범위를 확인하기 위해서는 아래의 명령어를 실행하면 된다.</p>
<pre><code class="language-bash">flow coverage path/to/file.js --color
</code></pre>
<p><a href="https://github.com/rpl/flow-coverage-report">flow-coverage-report</a>의 도움을 받을 수도 있다.</p>
<blockquote>
<p>나는 내가 알고 있는 TypeScript의 타입 적용 범위 보고서 도구가 없다(만약 알고 있다면 나에게 링크를 전달해주길!). 하지만 코드를 테스트해서 오류를 제대로 보고하고 있는지 확인할 수 있다.</p>
</blockquote>
<h2>어떻게 작동하는 것인가?</h2>
<p>두 도구가 이렇게 다른 적용 범위를 나타내는 이유는 구조(architecture)상의 차이점에 있다</p>
<h3>TypeScript 구조 - AST 지향</h3>
<p>TypeScript는 코드를 <em>진행</em>히면서 파악된 타입들로 테이블을 구성한다. 값과 표현 식을 발견하는 즉시 그들에게 타입을 부여한다. 타입스크립트는 모르는 타입을 만나면 <code>any</code> 타입을 부여할지 에러를 발생시킬지 즉시 결정한다.</p>
<h3>Flow 구조 - 그래프 지향</h3>
<p>Flow는 우선 모든 값과 표현 식에 대해 서로의 관계를 표현하는 그래프를 구성한다. 그러고 나서 각각의 값과 표현 식에 대해 타입을 부여하기 시작한다. 만약 모르는 타입을 만나면 우선 “open” 타입으로 지정한 후 나중에 다시 확인한다.</p>
<p>Flow가 프로그램 전체 그래프를 완성하고 나면 모든 점을 연결하기 시작하고 타입은 서로에게 전달(flow)된다. Open 타입은 자신에게 전달된 모든 타입을 검토한 후 최종적으로 하나의 타입을 결정하는데 이를 <em>추론</em>(inferred)된 타입이라고 부른다.</p>
<p>이렇게 추론된 타입의 발생은 직접 확인할 수 있다. 앞에서 Flow가 발생시킨 타입 에러를 다시 살펴보자.</p>
<pre><code class="language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">square</span>(<span class="hljs-params">n</span>) </span>{
 <span class="hljs-keyword">return</span> n * n;
        ^   ^
        <span class="hljs-built_in">Error</span> (x2)
}
square(<span class="hljs-string">"oops"</span>);

&gt; <span class="hljs-built_in">Error</span> (x2)
&gt; string. The operand <span class="hljs-keyword">of</span> an arithmetic operation must be a number.
</code></pre>
<p>어떻게 <code>square(&quot;oops&quot;)</code>보다는 <code>n * n</code>에 에러가 표시되었는지 생각해보자. <code>square</code> 함수의 인자 <code>n</code>에는 타입이 명시되어 있지 않다. 하지만 함수 실행에 사용된 <code>&quot;oops&quot;</code>가 문자열이므로 Flow가 <code>n</code>이 string 타입이라고 추론했기 때문이다.</p>
<p>타입 주석을 추가하면 에러 발생 지점이 바뀌는 것을 확인할 수 있다.</p>
<pre><code class="language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">square</span>(<span class="hljs-params">n: number</span>) </span>{
  <span class="hljs-keyword">return</span> n * n;
}
square(<span class="hljs-string">"oops"</span>);
       ^ <span class="hljs-built_in">Error</span>

&gt; <span class="hljs-built_in">Error</span>: string.
&gt; This type is incompatible <span class="hljs-keyword">with</span> the expected param type <span class="hljs-keyword">of</span> number.
</code></pre>
<p>이는 중요한 사실을 상기시킨다: Flow가 타입을 추론한다고 해서 타입 주석을 달지 말아야 한다는 의미는 아니라는 것이다.</p>
<h2>결론</h2>
<p>TypeScript와 Flow는 둘 다 훌륭한 타입 체크 프로세스다. 특히 파일별로 적용할 수 있다는 건 좋은 장점이다.</p>
<p>하지만 Flow를 사용한다면 높은 타입 적용 범위를 훨씬 빠르게 얻을 수 있고 결과적으로 당신은 편안한 잠을 잘 수 있게 된다.</p>
<p>Flow를 사용하면 단지 에러를 제거하기 위해서가 아니라 에러를 더 멋지고 정밀하게 표현하기 위해서 타입을 추가할 수 있다.</p>
</div></div><div class="Post-disqus" id="disqus_thread" data-reactid="21"></div></div></div><div class="_13qA-KSZqJDxRAI1Q18vSq" data-reactid="22"><div class="_3MVqerTEmSgjPrIo96oo4V" data-reactid="23"><div class="_197Lsc3-Nl2h356C-02yi" data-reactid="24"><!-- react-text: 25 -->@2016 <!-- /react-text --><a class="_1FzwQvAaknkKTlCYtcCU-a" href="https://www.github.com/rhostem" target="_blank" data-reactid="26">rhostem</a><!-- react-text: 27 --> All rights reserved<!-- /react-text --></div><div class="_322qsx9AYZtOycOgJcW4xe" data-reactid="28"><a href="https://www.github.com/rhostem" data-reactid="29"><i class="fa fa-github" data-reactid="30"></i></a><a href="mailto:syoung.j@gmail.com" data-reactid="31"><i class="fa fa-envelope-o" data-reactid="32"></i></a></div></div></div></div></div></div></div></body></html>