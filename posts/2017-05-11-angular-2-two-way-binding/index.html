<!DOCTYPE html>
 <html lang="ko"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0 maximum-scale=5.0"><link rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/earlyaccess/notosanskr.css"><title data-react-helmet="true">Angular 2의 양방향 연결(two-way binding) 구현 - rhostem.github.io</title><style>._1lkeM08JhCnwSn2DVeoecR:after{content:"";display:block;clear:both}._1lkeM08JhCnwSn2DVeoecR{position:absolute;top:0;left:0;width:100%;background:-webkit-linear-gradient(left,#4568dc,#b06ab3);background:linear-gradient(90deg,#4568dc,#b06ab3);border-bottom:1px solid #ebebeb}._3vtsIDAmz41DMSTnifGo8Z{max-width:1070px;margin-left:auto;margin-right:auto;padding-right:1rem;padding-left:1rem}._3vtsIDAmz41DMSTnifGo8Z:before{content:"";display:table}._3vtsIDAmz41DMSTnifGo8Z:after{content:"";display:table;clear:both}._1xAxZ9JAz_Q9hTR07A6SFz{float:left;margin:0;color:#fff;font-weight:100;font-size:1.2rem;font-family:Noto Sans KR,PT Sans Narrow,sans-serif;line-height:3rem;letter-spacing:-1px}._2HBj6PUI-wllZhmH4Doygj{float:left;list-style:none;padding-left:0}._2zoPwXn25_5i1_U9Mb64bH{font-size:16px;line-height:3rem;font-weight:400;color:#222}._27R8rQLWPSjk1H33uu2gky ul li a._254VQs_6m4dyEzsHnuRLbc,._27R8rQLWPSjk1H33uu2gky ul li a:hover{border-bottom:1px solid}html{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,cite,code,details,figcaption,figure,footer,header,hgroup,main,nav,section,small,summary{display:block}article,article ol,article ul,blockquote,body,div,figure,footer,header,input,nav,section{box-sizing:border-box}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background:transparent}a:active,a:hover{outline:0}abbr{letter-spacing:.1em}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}mark{background:#ff0;color:#000}small{font-size:70%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}em,i{line-height:0;position:relative;vertical-align:baseline}img{border:0}svg:not(:root){overflow:hidden}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}img{max-width:100%;display:block;margin:inherit auto}body{letter-spacing:-.02em}h1{letter-spacing:-.05em}h2,h3,h4,h5,h6{letter-spacing:-.03em}@media screen and (min-width:40em){.floatLeft{float:left}}@media screen and (min-width:40em){.floatCenter{margin-left:auto;margin-right:auto}}@media screen and (min-width:40em){.floatRight{float:right}}@media screen and (min-width:40em){body,html{margin:0;width:100%;max-width:none}}html{box-sizing:border-box;font-size:16px;font-size:100%;font-size:calc(16px + 2 * ((100vw - 480px) / 800));line-height:1.625;color:#222;font-family:Iropke Batang,Noto Sans KR,AppleSDGothicNeo-Regular,Malgun Gothic,"\B9D1\C740   \ACE0\B515",dotum,\\B3CB\C6C0,sans-serif;-webkit-font-smoothing:antialiased;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}@media screen and (min-width:1280px){html{font-size:18px}}@media screen and (max-width:480px){html{font-size:16px}}*,:after,:before{box-sizing:inherit}body{margin:0}footer{display:block}body>footer{margin:0 auto;width:80%}header,main,section{display:block}p{margin:1.75rem auto}a{background:transparent;color:#222;text-decoration:none;-webkit-transition:all .3s;transition:all .3s;word-break:break-all}a:active,a:hover{outline:0}a:active,a:hover{color:#222}article{display:block;margin:0 auto;width:80%}@media screen and (min-width:40em){article{max-width:945px;max-width:52.5rem}}audio{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}canvas{display:inline-block;vertical-align:baseline}pre{overflow:auto}code,kbd,pre,samp{font-family:Menlo Regular,Droid Sans Mono,monospace,Courier}code{display:block;padding:26px;padding:1.625rem}@media screen and (min-width:40em){code{padding:31px;padding:1.722222222222222rem}}details,figcaption,summary{display:block}figcaption{line-height:26px;line-height:1.625rem;color:#222;font-size:.8125rem;margin-bottom:0;color:rgba(34,34,34,.7);text-align:center}@media screen and (min-width:40em){figcaption{line-height:31px;line-height:1.722222222222222rem;margin-top:.75rem;margin-bottom:0}}figure{display:block;margin:2rem auto}@media screen and (min-width:40em){figure.floatLeft,figure.floatRight{max-width:315px;max-width:17.5rem;padding:0 31px;padding:0 1.722222222222222rem}}@media screen and (min-width:40em){figure.floatLeft blockquote,figure.floatRight blockquote{padding:0;text-align:left}}@media screen and (min-width:40em){figure.floatLeft blockquote p,figure.floatRight blockquote p{font-size:19.2px;font-size:1.2rem;line-height:31px;line-height:1.722222222222222rem}}h1{font-size:40px;font-size:2.5rem;line-height:52px;line-height:3.25rem;margin-top:104px;margin-top:6.5rem;margin-bottom:26px;margin-bottom:1.625rem}h2{font-size:27px;font-size:1.6875rem;line-height:39px;line-height:2.4375rem;margin-top:65px;margin-top:4.0625rem;margin-bottom:13px;margin-bottom:.8125rem}h3{font-size:22px;font-size:1.375rem;margin-top:52px;margin-top:3.25rem}h3,h4{line-height:26px;line-height:1.625rem;margin-bottom:13px;margin-bottom:.8125rem}h4{font-size:19.2px;font-size:1.2rem;margin-top:39px;margin-top:2.4375rem}h5,h6{font-size:16px;font-size:1rem;line-height:26px;line-height:1.625rem;margin-top:65px;margin-top:4.0625rem;margin-bottom:13px;margin-bottom:.8125rem}h1,h2,h3,h4,h5,h6{word-break:keep-all;word-wrap:break-word}@media screen and (min-width:40em){h1{font-size:40px;font-size:2.5xrrem;line-height:62px;line-height:3.444444444444445rem;margin-top:124px;margin-top:6.888888888888889rem;margin-bottom:31px;margin-bottom:1.722222222222222rem}h2{font-size:27px;font-size:1.6875rem;line-height:46.5px;line-height:2.583333333333334rem;margin-top:77.5px;margin-top:4.305555555555556rem;margin-bottom:15.5px;margin-bottom:.861111111111111rem}h3{font-size:22px;font-size:1.375rem;margin-top:62px;margin-top:3.444444444444445rem}h3,h4{line-height:31px;line-height:1.722222222222222rem;margin-bottom:15.5px;margin-bottom:.861111111111111rem}h4{font-size:19.2px;font-size:1.2rem;margin-top:46.5px;margin-top:2.583333333333334rem}h5,h6{font-size:16px;font-size:1rem;line-height:31px;line-height:1.722222222222222rem;margin-top:77.5px;margin-top:4.305555555555556rem;margin-bottom:15.5px;margin-bottom:.861111111111111rem}}h1+h2{margin-top:26px;margin-top:1.625rem}@media screen and (min-width:40em){h1+h2{margin-top:31px;margin-top:1.722222222222222rem}}h2+h3,h3+h4,h4+h5{margin-top:13px;margin-top:.8125rem}@media screen and (min-width:40em){h2+h3,h3+h4,h4+h5{margin-top:15.5px;margin-top:.861111111111111rem}}h5+h6{margin-top:-13px;margin-top:-.8125rem}@media screen and (min-width:40em){h5+h6{margin-top:-15.5px;margin-top:-.861111111111111rem}}h6{font-style:italic;font-weight:400}hgroup,hr{display:block}hr{margin-top:52px;margin-bottom:52px;box-sizing:content-box;border:0;color:#222;margin:3.25rem auto;width:50%;height:1px;background-image:-webkit-linear-gradient(left,rgba(34,34,34,.2),rgba(34,34,34,.75),rgba(34,34,34,.2));background-image:linear-gradient(90deg,rgba(34,34,34,.2),rgba(34,34,34,.75),rgba(34,34,34,.2))}@media screen and (min-width:40em){hr{margin-top:62px;margin-top:3.444444444444445rem;margin-bottom:62px;margin-bottom:3.444444444444445rem}}img{border:0;max-width:100%;display:block;margin:inherit auto}svg:not(:root){overflow:hidden}ol li,ul li{margin-bottom:.75em}nav{display:block}progress{display:inline-block;vertical-align:baseline}blockquote{margin:2.25rem 0 2.25rem -19.2px;padding-left:calc(1em - 3px);font-style:italic;border-left:3px solid #222;color:rgba(0,0,0,.6)}cite{display:block;font-style:normal}figure blockquote{padding:26px 0;padding:1.625rem 0}@media screen and (min-width:40em){figure blockquote{padding:62px 0 31px;padding:3.444444444444445rem 0 1.722222222222222rem;text-align:center}}figure blockquote p{font-size:27px;font-size:1.6875rem;line-height:39px;line-height:2.4375rem}@media screen and (min-width:40em){figure blockquote p{font-size:27px;font-size:1.6875rem;line-height:46.5px;line-height:2.583333333333334rem}}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}[hidden],template{display:none}abbr{letter-spacing:.1em}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:400;background-color:transparent;background-image:-webkit-linear-gradient(top,rgba(39,243,106,.1),rgba(39,243,106,.1));background-image:linear-gradient(180deg,rgba(39,243,106,.1),rgba(39,243,106,.1))}dfn{font-style:italic}em,i{line-height:0;position:relative;vertical-align:baseline}mark{background:#ff0;color:#000}small{line-height:13px;line-height:.8125rem;font-size:70%}@media screen and (min-width:40em){small{line-height:15.5px;line-height:.861111111111111rem}}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}.attention-grabber{font-size:19.2px;font-size:1.2rem}.alignLeft{text-align:left}.alignCenter{text-align:center}.alignRight{text-align:right}.uppercase{letter-spacing:.1em;text-transform:uppercase}video{display:inline-block;vertical-align:baseline}@font-face{font-family:Menlo Regular;font-style:normal;font-weight:400;src:url(/b01d11a9b3411615d4fc492aa57ebca9.woff) format("woff")}@font-face{font-family:Iropke Batang;src:url(/d9be11d1779de7b97f3a77e3e7342d24.eot);src:url(/5fd69dafd52c8afb040d4c15e2fa5b00.woff) format("woff")}._2p_A6KEfS9E7S_lV_Ho9kX:after{content:"";display:block;clear:both}._1DRfYVqYtJYX-XdYgKDzZX{float:left;display:block;padding:4px 10px;margin-bottom:4px;font-size:.8rem;color:rgba(0,0,0,.6);background-color:rgba(0,0,0,.04);border-radius:3px}._1DRfYVqYtJYX-XdYgKDzZX:hover{background-color:rgba(0,0,0,.1)}._1DRfYVqYtJYX-XdYgKDzZX:not(:last-child){margin-right:4px}._13qA-KSZqJDxRAI1Q18vSq{position:absolute;bottom:0;width:100%;background-color:#fff;border-top:1px solid #ebebeb}._3MVqerTEmSgjPrIo96oo4V{position:relative;margin-top:2px;padding:1rem;max-width:1070px;margin-left:auto;margin-right:auto;min-height:3.5rem;font-size:.8rem}._3MVqerTEmSgjPrIo96oo4V:before{content:"";display:table}._3MVqerTEmSgjPrIo96oo4V:after{content:"";display:table;clear:both}._197Lsc3-Nl2h356C-02yi{float:left}._1FzwQvAaknkKTlCYtcCU-a{text-decoration:underline}._322qsx9AYZtOycOgJcW4xe{float:right;font-size:1rem}._322qsx9AYZtOycOgJcW4xe>*{margin-left:.5em}a>code,h1>code,h2>code,h3>code,h4>code,h5>code,li>code,p>code,span>code{border-radius:3px;white-space:pre;white-space:pre-wrap;white-space:pre-line;white-space:-pre-wrap;white-space:-o-pre-wrap;white-space:-moz-pre-wrap;white-space:-hp-pre-wrap;word-wrap:break-word;background:#f8f8f8;display:inline;max-width:100%;overflow:auto;padding:.1em .5em;font-size:.9em}pre code{padding:.5em 1em;font-size:.85em;border:1px solid #d1d5da;background-color:#fff;border-radius:3px;box-shadow:inset 0 1px 2px rgba(27,31,35,.075)}.hljs,pre code{display:block;overflow-x:auto;color:#333}.hljs{background:#fff;padding:.5em}.hljs-comment,.hljs-meta{color:#969896}.hljs-emphasis,.hljs-quote,.hljs-string,.hljs-strong,.hljs-template-variable,.hljs-variable{color:#df5000}.hljs-keyword,.hljs-selector-tag,.hljs-type{color:#a71d5d}.hljs-attribute,.hljs-bullet,.hljs-literal,.hljs-symbol{color:#0086b3}.hljs-name,.hljs-section{color:#63a35c}.hljs-tag{color:#333}.hljs-attr,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-selector-pseudo,.hljs-title{color:#795da3}.hljs-addition{color:#55a532;background-color:#eaffea}.hljs-deletion{color:#bd2c00;background-color:#ffecec}.hljs-link{text-decoration:underline}.Post{max-width:740px;margin-left:auto;margin-right:auto;margin-bottom:3.444rem;padding-right:2rem;padding-left:2rem;background-color:#fff}.Post h1{text-align:left;font-weight:700}.Post a{text-decoration:underline}.Post:before{content:"";display:table}.Post:after{content:"";display:table;clear:both}@media (max-width:900px){.Post{padding:0 1.5rem;margin-bottom:26px}}@media (max-width:500px){.Post{padding:0 1.2rem;margin-bottom:26px}}.Post-postDesc,.Post-text{margin-bottom:3.4444rem}.Post-text img{max-width:100%;height:auto;margin:0 auto}.Post .text{margin-left:auto;margin-right:auto}.date-published{margin:.7rem 0;color:rgba(0,0,0,.44);font-size:.9rem}.Post-iframeWrapper{position:relative;display:block;padding-bottom:56.25%;//:9}.Post-iframe{position:absolute;top:0;left:0;width:100%;height:100%}.blog-page{margin-bottom:40px}.blog-page h1{font-size:calc(20px + 16 * ((100vw - 480px) / 800));margin-top:0}@media screen and (min-width:1280px){.blog-page h1{font-size:36px}}@media screen and (max-width:480px){.blog-page h1{font-size:20px}}.blog-page p{font-size:16px;line-height:26px;margin-bottom:26px}._3tsckNsI_zTYrOZaXR_6IK{max-width:740px;margin-left:auto;margin-right:auto;padding:2rem 1rem}._3tsckNsI_zTYrOZaXR_6IK:before{content:"";display:table}._3tsckNsI_zTYrOZaXR_6IK:after{content:"";display:table;clear:both}._1W3__fR7m7-eydodz7wXg0{display:block;background-color:#fff;border:1px solid rgba(0,0,0,.09);margin:2rem 0}._1W3__fR7m7-eydodz7wXg0:first-child{margin-top:0}._1W3__fR7m7-eydodz7wXg0:last-child{margin-bottom:0}._1v4BsZYq6EZY87pcU4y8vJ{width:100%;height:250px;margin:0 auto;background-size:cover;background-position:50% 0;background-repeat:no-repeat}@media (max-width:500px){._1v4BsZYq6EZY87pcU4y8vJ{height:200px}}.XEajKE3_W-950W0ElCBTZ{padding:1.75rem}@media (max-width:500px){.XEajKE3_W-950W0ElCBTZ{padding:1.25rem}}._3_YP2CwjRKGCGvmxb5Qeuu{margin:0 0 .5rem;font-size:1.45rem;font-weight:400;line-height:1.625}._27vnzMOPVXq0srZTmcN9Xv{display:-webkit-box;width:100%;max-height:2.8rem;-webkit-line-clamp:2;overflow:hidden;text-overflow:ellipsis;word-wrap:break-word;font-size:.85rem;line-height:1.4rem}@media (max-width:500px){._27vnzMOPVXq0srZTmcN9Xv{margin-top:1rem}}.nlwbSIcVOpLNqdNGWSOmC{margin-top:1rem}._3q_ody9XsqqwLyXvmPvz64:after{content:"";display:block;clear:both}._3q_ody9XsqqwLyXvmPvz64{margin-top:.75rem}@media (max-width:500px){._3q_ody9XsqqwLyXvmPvz64{margin-top:.75rem}}._2HVW_-guxNFIRLdWPDJIMU{font-size:.8rem;color:rgba(0,0,0,.44)}._3KOLrobI5ED2v88kJg7PC9{float:right;font-size:.8rem;color:#b06ab3;background:rgba(176,106,179,.93333)}&:not(:last-child){margin-bottom:1rem}.wrapper{position:relative;padding-top:3rem;padding-bottom:3.5rem;min-height:100vh}.content{max-width:1070px;margin-left:auto;margin-right:auto;background-color:#fff}.content:after,.content:before{content:"";display:table}.content:after{clear:both}</style><link rel="amphtml" href="/amp/posts/2017-05-11-angular-2-two-way-binding/"></head><body><div id="react-mount"><div class="wrapper" data-reactroot="" data-reactid="1" data-react-checksum="1609344740"><nav class="_1lkeM08JhCnwSn2DVeoecR" data-reactid="2"><div class="_3vtsIDAmz41DMSTnifGo8Z" data-reactid="3"><a href="/" data-reactid="4"><h1 class="_1xAxZ9JAz_Q9hTR07A6SFz" data-reactid="5">rhostem.github.io</h1></a></div></nav><div data-reactid="6"><!-- react-empty: 7 --><div data-reactid="8"><!-- react-empty: 9 --><div class="content" data-reactid="10"><div class="Post" data-reactid="11"><div class="Post-text" data-reactid="12"><h1 data-reactid="13">Angular 2의 양방향 연결(two-way binding) 구현</h1><div class="Post-postDesc" data-reactid="14"><div class="_2p_A6KEfS9E7S_lV_Ho9kX" data-reactid="15"><span class="_1DRfYVqYtJYX-XdYgKDzZX" data-reactid="16">JavaScript</span><span class="_1DRfYVqYtJYX-XdYgKDzZX" data-reactid="17">Angular 2</span></div><div class="date-published" data-reactid="18">2017년 5월 11일</div></div><div data-reactid="19"><figure>
<img src="/posts/2017-05-11-angular-2-two-way-binding/karina-carvalho-94650.jpg">
<figcaption>https://unsplash.com/@nickeedoo</figcaption>
</figure>
<h2>one-way binding</h2>
<p>Angular 2(Angular &gt;= 2.x, 이하 Angular로 표기)는 React.js, Vue.js처럼 데이터의 흐름이 단방향(one-way binding)이다. 최근 대부분의 모던 자바스크립트 프레임워크들은 단방향 데이터 연결을 지향하고 있다. 그 이유는 앱 구조를 보다 명확하게 할 수 있고 확실한 명령을 통해서만 앱 상태를 변경하기에 사이드 이펙트 발생을 줄이고 컴포넌트간의 데이터 흐름을 직관적으로 만들어주기 때문이다.</p>
<h2>AngularJS의 two way binding</h2>
<p>Angular 1(Angular &gt; 1.x, 이하 AngularJS로 표기)에서 많은 인기를 얻었던 특징 중에는 <code>ng-model</code> 지시자(directive)를 이용한 양방향 데이터 연결(two-way binding)이 있다. UI에 연결된 데이터가 변경되면 앱의 상태가 자동으로 업데이트되는 기능이다. 예를 들면 input 태그의 value 속성에 변수를 할당한 후 사용자가 텍스트를 입력하면 onChange에 콜백 함수를 할당하지 않아도 자동으로 변수가 입력된 값으로 업데이트된다.</p>
<pre><code class="language-html">// name 속성이 연결된 input에 텍스트를 입력하면 h1 태그 내부의 텍스트가 동시에 변경된다.
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">ng-app</span>=<span class="hljs-string">"myApp"</span> <span class="hljs-attr">ng-controller</span>=<span class="hljs-string">"myCtrl"</span>&gt;</span>
  Name: <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">ng-model</span>=<span class="hljs-string">"name"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>You entered: {{name}}<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p>앞서 Angular는 메이저 업데이트를 통해 데이터는 흐름이 단방향으로 바뀌었다고 했다. 그렇다면 자연스럽게 ng-model을 통한 양방향 데이터 연결은 컨셉에 맞지 않으니 제거했을 거라고 생각할 수도 있지만 그렇지 않다. 새로운 Angular에서도 여전히 ng-model 기능을 지원한다. 하지만 실제 구현을 살펴보면 양방향 데이터 연결이 아니라 단방향에 기반을 두고 있다는 사실을 확인할 수 있다.</p>
<h2>banana-in-box 표기법</h2>
<p>Angular에서는 컴포넌트에 속성(property)과 이벤트(event)를 바인딩하는 문법을 구분해서 사용한다. 속성에는 대괄호, 이벤트에는 중괄호를 사용한다.</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">app-two-way-binded</span>
  [<span class="hljs-attr">data</span>]=<span class="hljs-string">"prop"</span>
  (<span class="hljs-attr">dataChange</span>)=<span class="hljs-string">"onDataChange($event)"</span>
&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">app-two-way-binded</span>&gt;</span>
</code></pre>
<p>그리고 Angular에서는 양방향 연결을 위한 특수한 표기법을 지원한다. banana-in-box라는 표기법으로 중괄호와 대괄호를 동시에 사용한다.</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">app-two-way-binded</span>
  [(<span class="hljs-attr">data</span>)]=<span class="hljs-string">"prop"</span>
/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">app-two-way-binded</span>&gt;</span>
</code></pre>
<p>저 표기법을 사용하면 예전처럼 프레임워크가 양방향 연결을 구현해 주는 것일까? 그렇지 않다. 대신 Angular는 컴파일시 banana-in-box 표기법을 <strong>속성 바인딩과 이벤트 바인딩으로 자동으로 분리</strong>한다. 속성 바인딩은 할당된 이름을 그대로 사용하고 이벤트 바인딩에는 속성에 사용한 이름에 <code>Change</code>라는 접미사가 붙은 이름을 사용한다.</p>
<pre><code class="language-html"><span class="hljs-tag">&lt;<span class="hljs-name">app-two-way-binded</span>
  [<span class="hljs-attr">data</span>]=<span class="hljs-string">"prop"</span>
  (<span class="hljs-attr">dataChange</span>)=<span class="hljs-string">"prop = $event"</span>
/&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">app-two-way-binded</span>&gt;</span>
</code></pre>
<p><code>prop = $event</code>부분은 콜백 함수를 선언하지 않고 함수 본문을 직접 할당한 방식이다. <code>dataChange</code> 이벤트가 발생하면 부모 컴포넌트의 <code>prop</code> 속성에 <code>$event</code> 변수가 할당되어서 부모의 상태가 업데이트된다. 그런데 <code>$event</code>라는 변수는 어디서 온 것일까? 다음 코드를 살펴보자.</p>
<pre><code class="language-js">@Component(
  selector: <span class="hljs-string">'app-two-way-binded'</span>,
  <span class="hljs-attr">template</span>: <span class="hljs-string">`
    &lt;div&gt;
      &lt;label&gt;data: &lt;/label&gt;
      &lt;input [value]="data" /&gt;
      &lt;button (click)="increase()"&gt;+&lt;/button&gt;
    &lt;/div&gt;
  `</span>
)
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TwoWayBinded</span> </span>{
  @Input() data: number;
  @Output() dataChange = <span class="hljs-keyword">new</span> EventEmitter();

  increase() {
    <span class="hljs-keyword">this</span>.data++;
    <span class="hljs-keyword">this</span>.dataChange.emit(<span class="hljs-keyword">this</span>.data);
  }
}
</code></pre>
<p><code>TwoWayBinded</code>의 버튼을 클릭하면 <code>increase</code> 메소드가 실행된다. <code>increase</code> 메소드는 <code>data</code> 속성의 값을 변경한 후 EventEmiter인 <code>dataChange</code>의 <code>emit</code> 메소드를 실행해서 이벤트를 발생시킨다.
<code>emit</code> 메소드의 인자로 전달된 값이 바로 앞선 예제의 <code>(dataChange)=&quot;prop = $event&quot;</code> 부분에 등장한 <code>$event</code>에 해당한다.</p>
<p>컴포넌트에서 버튼을 클릭하면 <code>data</code> 속성이 변경되고, 그 값은 다시 부모 컴포넌트로 전달된다. 이렇게 양방향 연결이 구현되었다.</p>
<h2>getter와 setter를 이용한 양방향 바인딩</h2>
<p>앞서 살펴본 예제에서는 버튼을 클릭해야만 양방향 연결이 작동한다. AngularJS에서 사용했던 것처럼 따로 버튼을 클릭하지 않고도 input 값만 변경되어도 양방향 연결이 되도록 만들어보자. 이를 위해서는 <a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Functions/get">getter</a>와 <a href="https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Functions/set">setter</a>를 사용해야 한다.</p>
<pre><code class="language-js">@Component(
  selector: <span class="hljs-string">'app-two-way-binded'</span>,
  <span class="hljs-attr">template</span>: <span class="hljs-string">`
    &lt;div&gt;
      &lt;label&gt;data: &lt;/label&gt;
      &lt;input [value]="data" /&gt;
    &lt;/div&gt;
  `</span>
)
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TwoWayBinded</span> </span>{
  componentData: number; <span class="hljs-comment">// 컴포넌트 속성</span>

  @Input()
  get data {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.componentData;
  }
  set data(v) {
    <span class="hljs-keyword">this</span>.componentData = v;
    <span class="hljs-keyword">this</span>.dataChange.emit(<span class="hljs-keyword">this</span>.componentData);
  }

  @Output() dataChange = <span class="hljs-keyword">new</span> EventEmitter();
}
</code></pre>
<p>핵심은 컴포넌트 로컬 속성을 따로 관리한다는 점이다.</p>
<p><code>data</code> 속성은 Input 데코레이터가 적용되었기에 컴포넌트와 그 부모에서 모두 값을 참조하고 할당할 수 있다. 대신 단순 참조와 할당을 하지 않고 getter로 로컬 속성인 <code>componentData</code>를 반환하고, setter로는 <code>input</code>에 입력된 값을 로컬 속성(componentData)에 할당한 후 다시 그 값을 부모 컴포넌트로 올려보낸다.</p>
<p>setter에서 이벤트를 발생시키지 않으면 컴포넌트는 부모 컴포넌트로 변경된 값을 전달하지 않는다. UI에서 값이 변경되고 있지만 그것은 <code>TwoWayBinded</code>의 독립된 공간에서만 일어나는 일일 뿐이며 부모 컴포넌트와는 관계가 없게 된다.</p>
<p>이 예제를 통해 Angular는 단방향 데이터 흐름을 가지며, 직접 지시를 하지 않으면 데이터가 아래에서 위로 거슬러 올라가는 일은 발생하지 않는다는 사실을 확인할 수 있다.</p>
<h2>ngModel과 banana-in-box</h2>
<p>banana-in-box 표기법에 ngModel이라는 이름을 사용하면 AngularJS에서 사용했던 것처럼 프레임워크가 자동으로 양방향 바인딩을 구현해준다. 하지만 <code>input</code>같은 HTML 폼 요소에서 사용가능하고 커스텀 컴포넌트에서는 앞서 제시한 getter, setter를 이용한 방법 등으로 사용자가 직접 구현해야 한다.</p>
<pre><code class="language-js">@Component(
  selector: <span class="hljs-string">'app-ngModel-sample'</span>,
  <span class="hljs-attr">template</span>: <span class="hljs-string">`
    &lt;label for="search"&gt;
      search:
      &lt;input [(ngModel)]="search" name="search"/&gt;
    &lt;/label&gt;
  `</span>
)
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NgModelSample</span> </span>{
  search: string;
}
</code></pre>
<h2>Syntactic sugar</h2>
<p>Angular에서 양방향 바인딩은 <a href="https://en.wikipedia.org/wiki/Syntactic_sugar">syntactic sugar</a>(문법을 사용하기 쉽게 표현한 형태)일 뿐이며 단방향으로 구현되어 있다. 프레임워크가 어려운 일을 대산해주면 사용하는 입장에서는 편하지만 표준에서는 멀어진다는 단점이 있다. React.js가 <a href="https://facebook.github.io/react/blog/2015/01/27/react-v0.13.0-beta-1.html#autobinding">컴포넌트 메소드 자동 바인딩을 제거한 사례</a>도 그런 철학에 기반한 것으로 여겨진다. 좋은 도구를 사용하면서도 항상 원리에 접근하려는 자세를 가져야 하겠다.</p>
<h2>참고자료</h2>
<ul>
<li><a href="https://angular.io/docs/ts/latest/guide/template-syntax.html#!#two-way">Angular Docs - Two way binding</a></li>
<li><a href="https://blog.thoughtram.io/angular/2016/10/13/two-way-data-binding-in-angular-2.html">TWO-WAY DATA BINDING IN ANGULAR</a></li>
</ul>
</div></div><div class="Post-disqus" id="disqus_thread" data-reactid="20"></div></div></div><div class="_13qA-KSZqJDxRAI1Q18vSq" data-reactid="21"><div class="_3MVqerTEmSgjPrIo96oo4V" data-reactid="22"><div class="_197Lsc3-Nl2h356C-02yi" data-reactid="23"><!-- react-text: 24 -->@2016 <!-- /react-text --><a class="_1FzwQvAaknkKTlCYtcCU-a" href="https://www.github.com/rhostem" target="_blank" data-reactid="25">rhostem</a><!-- react-text: 26 --> All rights reserved<!-- /react-text --></div><div class="_322qsx9AYZtOycOgJcW4xe" data-reactid="27"><a href="https://www.github.com/rhostem" data-reactid="28"><i class="fa fa-github" data-reactid="29"></i></a><a href="mailto:syoung.j@gmail.com" data-reactid="30"><i class="fa fa-envelope-o" data-reactid="31"></i></a></div></div></div></div></div></div></div><script src="/bundle.js?t=1498612226724"></script></body></html>